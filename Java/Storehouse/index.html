
<!DOCTYPE html>
<html class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="shortcut icon" href="../../assets/images/favicon.ico">
      
      <meta name="generator" content="mkdocs+mkdocs-material#1.0.3">
    
    
      
        <title>Storehouse (Android) - Scorocode documentation</title>
      
    
    
      <script src="../../assets/javascripts/modernizr-facb31f4a3.js"></script>
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application-f3ab63f78a.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-02ce7adcc2.palette.css">
      
      
    
    
  </head>
  
  
  
  
    <body data-md-color-primary="blue" data-md-color-accent="light-blue">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="Scorocode documentation" class=" md-logo  md-header-nav__button">
          
            <img src="../../logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
                <span class="md-header-nav__parent">
                  Applications examples
                </span>
              
            
            Storehouse (Android)
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search">
  <div class="md-search__overlay"></div>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" accesskey="s" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false">
      <label class="md-icon md-search__icon" for="search"></label>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result"></div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            
          </div>
      </div>
    </div>
  </nav>
</header>
    
    <div class="md-container">
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <i class=" md-logo  md-nav__button">
      
        <img src="../../logo.png">
      
    </i>
    Scorocode documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1">
    
    <label class="md-nav__link" for="nav-1">
      Scorocode
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-1">
        Scorocode
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../.." title="General info" class="md-nav__link">
        General info
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../main/main1/" title="Get started" class="md-nav__link">
        Get started
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../main/main2/" title="My account" class="md-nav__link">
        My account
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../app/app/" title="Working with application" class="md-nav__link">
        Working with application
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../app/app1/" title="Application analytics" class="md-nav__link">
        Application analytics
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../app/app2/" title="Application data" class="md-nav__link">
        Application data
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../app/app3/" title="Indexes" class="md-nav__link">
        Indexes
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../app/app4/" title="Triggers" class="md-nav__link">
        Triggers
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../app/app5/" title="Serverside code" class="md-nav__link">
        Serverside code
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../app/bots/" title="Telegram bots" class="md-nav__link">
        Telegram bots
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../app/app6/" title="Application settings" class="md-nav__link">
        Application settings
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      HTTP API
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-2">
        HTTP API
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../../httpapi/appapi/" title="Working with application" class="md-nav__link">
        Working with application
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../httpapi/httpapi1/" title="Users" class="md-nav__link">
        Users
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../httpapi/httpapi2/" title="Data" class="md-nav__link">
        Data
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../httpapi/httpapi3/" title="Files" class="md-nav__link">
        Files
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../httpapi/httpapi4/" title="Messages" class="md-nav__link">
        Messages
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../httpapi/httpapi5/" title="Scripts" class="md-nav__link">
        Scripts
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../httpapi/httpapi6/" title="Stats" class="md-nav__link">
        Stats
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      JavaScript SDK
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-3">
        JavaScript SDK
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../../JS/javascript/" title="JavaScript SDK" class="md-nav__link">
        JavaScript SDK
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../JS/Scorocode/" title="Scorocode" class="md-nav__link">
        Scorocode
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../JS/Scorocode.Object/" title="Scorocode.Object" class="md-nav__link">
        Scorocode.Object
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../JS/Scorocode.Query/" title="Scorocode.Query" class="md-nav__link">
        Scorocode.Query
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../JS/Scorocode.UpdateOps/" title="Scorocode.UpdateOps" class="md-nav__link">
        Scorocode.UpdateOps
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../JS/Scorocode.User/" title="Scorocode.User" class="md-nav__link">
        Scorocode.User
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../JS/Scorocode.Messenger/" title="Scorocode.Messenger" class="md-nav__link">
        Scorocode.Messenger
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../JS/Scorocode.CloudCode/" title="Scorocode.CloudCode" class="md-nav__link">
        Scorocode.CloudCode
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../JS/Scorocode.Bot/" title="Scorocode.Bot" class="md-nav__link">
        Scorocode.Bot
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../JS/Scorocode.Websocket/" title="Scorocode.WebSocket" class="md-nav__link">
        Scorocode.WebSocket
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../JS/Scorocode.System/" title="Scorocode.System" class="md-nav__link">
        Scorocode.System
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      SWIFT SDK (iOs, Mac OS)
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-4">
        SWIFT SDK (iOs, Mac OS)
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../../SWIFT/SWIFT/" title="SWIFT SDK" class="md-nav__link">
        SWIFT SDK
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../SWIFT/SC/" title="SC" class="md-nav__link">
        SC
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../SWIFT/SCValue/" title="SCValue" class="md-nav__link">
        SCValue
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../SWIFT/SCObject/" title="SCObject" class="md-nav__link">
        SCObject
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../SWIFT/SCQuery/" title="SCQuery" class="md-nav__link">
        SCQuery
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../SWIFT/SCUpdate/" title="SCUpdate" class="md-nav__link">
        SCUpdate
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../SWIFT/SCUser/" title="SCUser" class="md-nav__link">
        SCUser
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../SWIFT/SCMessage/" title="SCMessage" class="md-nav__link">
        SCMessage
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../SWIFT/SCScript/" title="SCScript" class="md-nav__link">
        SCScript
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../SWIFT/WebSocket/" title="WebSocket" class="md-nav__link">
        WebSocket
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Java SDK (Android)
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-5">
        Java SDK (Android)
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../Java/" title="Java SDK" class="md-nav__link">
        Java SDK
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../ScorocodeSDK/" title="ScorocodeSDK" class="md-nav__link">
        ScorocodeSDK
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../Document/" title="Document" class="md-nav__link">
        Document
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../Update/" title="Update" class="md-nav__link">
        Update
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../User/" title="User" class="md-nav__link">
        User
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../Query/" title="Query" class="md-nav__link">
        Query
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../Script/" title="Script" class="md-nav__link">
        Script
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../Message/" title="Message" class="md-nav__link">
        Message
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../WebSocket/" title="WebSocket" class="md-nav__link">
        WebSocket
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../ApplicationInfo/" title="ApplicationInfo" class="md-nav__link">
        ApplicationInfo
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../Bot/" title="Bot" class="md-nav__link">
        Bot
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../Collections/" title="Collections" class="md-nav__link">
        Collections
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../Folders/" title="Folders" class="md-nav__link">
        Folders
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../ScorocodeScript/" title="ScorocodeScript" class="md-nav__link">
        ScorocodeScript
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" checked>
    
    <label class="md-nav__link" for="nav-6">
      Applications examples
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-6">
        Applications examples
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Storehouse (Android)
      </label>
    
    <a href="./" title="Storehouse (Android)" class="md-nav__link md-nav__link--active">
      Storehouse (Android)
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#application-data-structure" title="Application Data Structure." class="md-nav__link">
    Application Data Structure.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#application-launch-screen" title="Application Launch Screen." class="md-nav__link">
    Application Launch Screen.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#new-user-registration-screen" title="New User Registration Screen." class="md-nav__link">
    New User Registration Screen.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#application-main-screen" title="Application Main Screen." class="md-nav__link">
    Application Main Screen.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-an-item-screen" title="Add an Item Screen" class="md-nav__link">
    Add an Item Screen
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#device-details-screen" title="Device Details Screen." class="md-nav__link">
    Device Details Screen.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#device-shipping-info-screen" title="Device Shipping Info Screen." class="md-nav__link">
    Device Shipping Info Screen.
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#application-data-structure" title="Application Data Structure." class="md-nav__link">
    Application Data Structure.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#application-launch-screen" title="Application Launch Screen." class="md-nav__link">
    Application Launch Screen.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#new-user-registration-screen" title="New User Registration Screen." class="md-nav__link">
    New User Registration Screen.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#application-main-screen" title="Application Main Screen." class="md-nav__link">
    Application Main Screen.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-an-item-screen" title="Add an Item Screen" class="md-nav__link">
    Add an Item Screen
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#device-details-screen" title="Device Details Screen." class="md-nav__link">
    Device Details Screen.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#device-shipping-info-screen" title="Device Shipping Info Screen." class="md-nav__link">
    Device Shipping Info Screen.
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
               
              
                
                <p><a name="Storehouse"></a></p>
<h1 id="storehouse-application">"Storehouse" Application</h1>
<p>This documentation includes description of the "Storehouse" application development process on the Scorocode platform as a demo. The application source code is available  in the following repository: <a href="https://github.com/Scorocode/scorocode-sample-storehouse">https://github.com/Scorocode/scorocode-sample-storehouse</a>.</p>
<p>The application is made to manage mobile phones stock inside a dealer storehouse and allows you to: </p>
<ol>
<li>Register a new user in the application database</li>
<li>Authenticate an application user</li>
<li>De-authenticate an application user</li>
<li>View available mobile phone models on stock in the storehouse  </li>
<li>Add a mobile phone model in the database</li>
<li>Delete a mobile phone model from the database</li>
<li>View full information about a mobile phone model</li>
<li>Change information about a mobile phone model</li>
<li>Select a certain mobile phone from a list using a filter</li>
<li>Add a user on the waiting list for this phone model</li>
<li>Ship this mobile phone model to the user</li>
<li>Notify the accounting department about the shipment using an email message</li>
<li>Notify a storehouse loading worker with a push message</li>
<li>Notify a courier with an sms message</li>
<li>Update the company's balance sheet taking into account the recent mobile phone shipment</li>
</ol>
<h2 id="application-data-structure">Application Data Structure.</h2>
<p>Let's create the <code>storehouse</code> collection with the following fields:</p>
<ol>
<li>platform (String)</li>
<li>cameraInfo (String)</li>
<li>deviceName (String)</li>
<li>colorsAvailable (Array)</li>
<li>devicePrice (Number)</li>
<li>buyers (Array)</li>
<li>lastSend (Date)</li>
<li>sendInfo (File)</li>
</ol>
<p>We add 3 documents inside the system collection <code>Roles</code> with the following corresponding values for the <code>name</code> field:</p>
<ol>
<li>deliveryPerson</li>
<li>accountantPerson</li>
<li>loaderPerson</li>
</ol>
<h2 id="application-launch-screen">Application Launch Screen.</h2>
<p>Let's create a launch screen for our application and call it <code>LoginActivity</code>. To do so we will go <code>File → New → Activity → Empty Activity</code> in Android Studio and add the following code in the layout file of the Activity:</p>
<p><div class="codehilite"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="nt">&lt;RelativeLayout</span> <span class="na">xmlns:android=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span>
    <span class="na">xmlns:tools=</span><span class="s">&quot;http://schemas.android.com/tools&quot;</span>
    <span class="na">android:id=</span><span class="s">&quot;@+id/activity_login&quot;</span>
    <span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
    <span class="na">android:layout_height=</span><span class="s">&quot;match_parent&quot;</span>
    <span class="na">android:paddingBottom=</span><span class="s">&quot;@dimen/activity_vertical_margin&quot;</span>
    <span class="na">android:paddingLeft=</span><span class="s">&quot;@dimen/activity_horizontal_margin&quot;</span>
    <span class="na">android:paddingRight=</span><span class="s">&quot;@dimen/activity_horizontal_margin&quot;</span>
    <span class="na">android:paddingTop=</span><span class="s">&quot;@dimen/activity_vertical_margin&quot;</span>
    <span class="na">tools:context=</span><span class="s">&quot;prof_itgroup.ru.storehouseapp.Activities.LoginActivity&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;LinearLayout</span>
        <span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
        <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span>
        <span class="na">android:gravity=</span><span class="s">&quot;center&quot;</span>
        <span class="na">android:orientation=</span><span class="s">&quot;vertical&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;TextView</span>
            <span class="na">style=</span><span class="s">&quot;@style/label_style&quot;</span>
            <span class="na">android:layout_marginTop=</span><span class="s">&quot;16dp&quot;</span>
            <span class="na">android:text=</span><span class="s">&quot;@string/login&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;EditText</span>
            <span class="na">android:id=</span><span class="s">&quot;@+id/etEmail&quot;</span>
            <span class="na">android:gravity=</span><span class="s">&quot;center&quot;</span>
            <span class="na">style=</span><span class="s">&quot;@style/textStyle&quot;</span>
            <span class="na">android:hint=</span><span class="s">&quot;@string/login_hint&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;TextView</span>
            <span class="na">style=</span><span class="s">&quot;@style/label_style&quot;</span>
            <span class="na">android:layout_marginTop=</span><span class="s">&quot;16dp&quot;</span>
            <span class="na">android:text=</span><span class="s">&quot;@string/password&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;EditText</span>
            <span class="na">android:gravity=</span><span class="s">&quot;center&quot;</span>
            <span class="na">android:id=</span><span class="s">&quot;@+id/etPassword&quot;</span>
            <span class="na">style=</span><span class="s">&quot;@style/textStyle&quot;</span>
            <span class="na">android:hint=</span><span class="s">&quot;@string/password_hint&quot;</span>
            <span class="na">android:inputType=</span><span class="s">&quot;textPassword&quot;</span>
            <span class="na">android:maxLines=</span><span class="s">&quot;1&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;LinearLayout</span>
            <span class="na">android:layout_width=</span><span class="s">&quot;wrap_content&quot;</span>
            <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span>
            <span class="na">android:gravity=</span><span class="s">&quot;center_horizontal&quot;</span>
            <span class="na">android:orientation=</span><span class="s">&quot;vertical&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;Button</span>
                <span class="na">android:id=</span><span class="s">&quot;@+id/btnLogin&quot;</span>
                <span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
                <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span>
                <span class="na">android:layout_marginTop=</span><span class="s">&quot;4dp&quot;</span>
                <span class="na">android:text=</span><span class="s">&quot;@string/login_button_text&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;Button</span>
                <span class="na">android:id=</span><span class="s">&quot;@+id/btnRegister&quot;</span>
                <span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
                <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span>
                <span class="na">android:layout_marginTop=</span><span class="s">&quot;4dp&quot;</span>
                <span class="na">android:text=</span><span class="s">&quot;@string/register_button_text&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/LinearLayout&gt;</span>
    <span class="nt">&lt;/LinearLayout&gt;</span>
<span class="nt">&lt;/RelativeLayout&gt;</span>
</pre></div>

The launch screen of the <code>LoginActivity</code> class is shown in Figure 1.1. </p>
<p><img alt="Application Launch Screen" src="../img/Storehouse/1.1.png" /></p>
<p>Figure 1.1 – application launch screen.</p>
<p>Let's add the following code lines in the <code>onCreate</code> method of the <code>LoginActivity</code> class:</p>
<div class="codehilite"><pre><span></span><span class="nd">@Override</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
    <span class="n">setContentView</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">activity_login</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">isUserLogined</span><span class="o">(</span><span class="k">this</span><span class="o">))</span> <span class="o">{</span>
        <span class="n">MainActivity</span><span class="o">.</span><span class="na">display</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="n">ScorocodeSdk</span><span class="o">.</span><span class="na">initWith</span><span class="o">(</span><span class="n">APPLICATION_ID</span><span class="o">,</span> <span class="n">CLIENT_KEY</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="n">FILE_KEY</span><span class="o">,</span> <span class="n">MESSAGE_KEY</span><span class="o">,</span> <span class="n">SCRIPT_KEY</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
    <span class="n">ButterKnife</span><span class="o">.</span><span class="na">bind</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>


<p><code>ScorocodeSdk</code> initialization is happening in the <code>onCreate</code> method with keys <code>appId</code>, <code>clientKey</code> (android), <code>fileKey</code>, <code>messageKey</code>, <code>scriptKey</code> using the <code>ScorocodeSdk.initWith(...)</code> method. These keys can be viewed at the «Security» tab in the project Settings.</p>
<p>On this screen, a database user can enter their system login and password. The application will check whether they are correct using the <code>.login()</code> method of the <code>User</code> class. This method is demonstrated in a listing:</p>
<div class="codehilite"><pre><span></span><span class="nd">@OnClick</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">btnLogin</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">onBtnLoginClicked</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="k">new</span> <span class="n">User</span><span class="o">();</span>
    <span class="n">user</span><span class="o">.</span><span class="na">login</span><span class="o">(</span><span class="n">etEmail</span><span class="o">.</span><span class="na">getText</span><span class="o">().</span><span class="na">toString</span><span class="o">(),</span> <span class="n">etPassword</span><span class="o">.</span><span class="na">getText</span><span class="o">().</span><span class="na">toString</span><span class="o">(),</span> <span class="k">new</span> <span class="n">CallbackLoginUser</span><span class="o">()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onLoginSucceed</span><span class="o">(</span><span class="n">ResponseLogin</span> <span class="n">responseLogin</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">DocumentInfo</span> <span class="n">userInfo</span> <span class="o">=</span> <span class="n">responseLogin</span><span class="o">.</span><span class="na">getResult</span><span class="o">().</span><span class="na">getUserInfo</span><span class="o">();</span>
            <span class="n">saveUserInfo</span><span class="o">(</span><span class="n">userInfo</span><span class="o">);</span>
            <span class="n">MainActivity</span><span class="o">.</span><span class="na">display</span><span class="o">(</span><span class="n">LoginActivity</span><span class="o">.</span><span class="na">this</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onLoginFailed</span><span class="o">(</span><span class="n">String</span> <span class="n">errorCode</span><span class="o">,</span> <span class="n">String</span> <span class="n">errorMessage</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">Helper</span><span class="o">.</span><span class="na">showToast</span><span class="o">(</span><span class="n">getBaseContext</span><span class="o">(),</span> <span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">error_login</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">});</span>
<span class="o">}</span>
</pre></div>


<p>In this method, we create a new sample of the <code>User</code> class and run its <code>login</code> method. The information about a user's email and password is taken from the corresponding <code>EditText</code>. The <code>login</code> method will check that a user with this email and this password exists in the «users» collection.</p>
<p>In case such user exists in the «users» collection, the <code>onLoginSucceed(...) callback</code> method will be executed. Otherwise it the <code>onFoginFailed(...)</code> method that will be executed. Thus, we can be sure whether such user exists in our database and act accordingly.</p>
<p>On the launch screen (see illustration 1.1) we also have the «Register» button which allows to register a new user in the system (add to the «users» database collection). Let's connect this button to the button click handler which opens an Activity with user's data needed for registration:</p>
<div class="codehilite"><pre><span></span><span class="nd">@OnClick</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">btnRegister</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">onBtnRegisterClicked</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">RegisterActivity</span><span class="o">.</span><span class="na">display</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>


<h2 id="new-user-registration-screen">New User Registration Screen.</h2>
<p>Let's create an new Activity called <code>RegisterActivity</code> and add the following xml code in the layout file of this Activity:</p>
<p><div class="codehilite"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="nt">&lt;LinearLayout</span> <span class="na">xmlns:android=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span>
    <span class="na">xmlns:tools=</span><span class="s">&quot;http://schemas.android.com/tools&quot;</span>
    <span class="na">android:id=</span><span class="s">&quot;@+id/activity_register&quot;</span>
    <span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
    <span class="na">android:layout_height=</span><span class="s">&quot;match_parent&quot;</span>
    <span class="na">android:gravity=</span><span class="s">&quot;center_horizontal&quot;</span>
    <span class="na">android:orientation=</span><span class="s">&quot;vertical&quot;</span>
    <span class="na">android:paddingBottom=</span><span class="s">&quot;@dimen/activity_vertical_margin&quot;</span>
    <span class="na">android:paddingLeft=</span><span class="s">&quot;@dimen/activity_horizontal_margin&quot;</span>
    <span class="na">android:paddingRight=</span><span class="s">&quot;@dimen/activity_horizontal_margin&quot;</span>
    <span class="na">android:paddingTop=</span><span class="s">&quot;@dimen/activity_vertical_margin&quot;</span>
    <span class="na">tools:context=</span><span class="s">&quot;prof_itgroup.ru.storehouseapp.Activities.RegisterActivity&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;TextView</span>
        <span class="na">style=</span><span class="s">&quot;@style/label_style&quot;</span>
        <span class="na">android:text=</span><span class="s">&quot;@string/register_username&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;EditText</span>
        <span class="na">android:id=</span><span class="s">&quot;@+id/etUsername&quot;</span>
        <span class="na">style=</span><span class="s">&quot;@style/textStyle&quot;</span>
        <span class="na">android:hint=</span><span class="s">&quot;@string/register_username_hint&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;TextView</span>
        <span class="na">android:layout_marginTop=</span><span class="s">&quot;16dp&quot;</span>
        <span class="na">style=</span><span class="s">&quot;@style/label_style&quot;</span>
        <span class="na">android:text=</span><span class="s">&quot;@string/register_email&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;EditText</span>
        <span class="na">android:id=</span><span class="s">&quot;@+id/etEmail&quot;</span>
        <span class="na">style=</span><span class="s">&quot;@style/textStyle&quot;</span>
        <span class="na">android:hint=</span><span class="s">&quot;@string/register_email_hint&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;TextView</span>
        <span class="na">android:layout_marginTop=</span><span class="s">&quot;16dp&quot;</span>
        <span class="na">style=</span><span class="s">&quot;@style/label_style&quot;</span>
        <span class="na">android:text=</span><span class="s">&quot;@string/register_password&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;EditText</span>
        <span class="na">android:id=</span><span class="s">&quot;@+id/etPassword&quot;</span>
        <span class="na">style=</span><span class="s">&quot;@style/textStyle&quot;</span>
        <span class="na">android:inputType=</span><span class="s">&quot;textPassword&quot;</span>
        <span class="na">android:hint=</span><span class="s">&quot;@string/register_email_password&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;EditText</span>
        <span class="na">android:id=</span><span class="s">&quot;@+id/etPasswordCheck&quot;</span>
        <span class="na">style=</span><span class="s">&quot;@style/textStyle&quot;</span>
        <span class="na">android:inputType=</span><span class="s">&quot;textPassword&quot;</span>
        <span class="na">android:hint=</span><span class="s">&quot;@string/register_email_password_again&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;Button</span>
        <span class="na">android:layout_marginTop=</span><span class="s">&quot;32dp&quot;</span>
        <span class="na">android:id=</span><span class="s">&quot;@+id/btnRegister&quot;</span>
        <span class="na">style=</span><span class="s">&quot;@style/textStyle&quot;</span>
        <span class="na">android:text=</span><span class="s">&quot;@string/btn_register_text&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/LinearLayout&gt;</span>
</pre></div>

This Activity is a new user registration screen, as shown in Figure 1.2</p>
<p><img alt="A new user registration screen" src="../img/Storehouse/1.2.png" /></p>
<p>Figure 1.2 — a new user registration screen.</p>
<p>All document fields needed for a user registration are listed on this screen. Let's add the button click event handler for the «Register» button which will run the <code>.register</code> method of the <code>User</code> class, as shown below:</p>
<div class="codehilite"><pre><span></span><span class="nd">@OnClick</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">btnRegister</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">onBtnRegisterClicked</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">String</span> <span class="n">userName</span> <span class="o">=</span> <span class="n">etUsername</span><span class="o">.</span><span class="na">getText</span><span class="o">().</span><span class="na">toString</span><span class="o">();</span>
    <span class="n">String</span> <span class="n">email</span> <span class="o">=</span> <span class="n">etEmail</span><span class="o">.</span><span class="na">getText</span><span class="o">().</span><span class="na">toString</span><span class="o">();</span>
    <span class="n">String</span> <span class="n">password</span> <span class="o">=</span> <span class="n">etPassword</span><span class="o">.</span><span class="na">getText</span><span class="o">().</span><span class="na">toString</span><span class="o">();</span>
    <span class="n">String</span> <span class="n">passwordCheck</span> <span class="o">=</span> <span class="n">etPasswordCheck</span><span class="o">.</span><span class="na">getText</span><span class="o">().</span><span class="na">toString</span><span class="o">();</span>

    <span class="k">if</span><span class="o">(</span><span class="n">isInputValid</span><span class="o">(</span><span class="n">userName</span><span class="o">,</span> <span class="n">email</span><span class="o">,</span> <span class="n">password</span><span class="o">,</span> <span class="n">passwordCheck</span><span class="o">))</span> <span class="o">{</span>
        <span class="k">new</span> <span class="n">User</span><span class="o">().</span><span class="na">register</span><span class="o">(</span><span class="n">userName</span><span class="o">,</span> <span class="n">email</span><span class="o">,</span> <span class="n">password</span><span class="o">,</span> <span class="k">new</span> <span class="n">CallbackRegisterUser</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onRegisterSucceed</span><span class="o">()</span> <span class="o">{</span>
                <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="n">RegisterActivity</span><span class="o">.</span><span class="na">this</span><span class="o">,</span> <span class="n">getResources</span><span class="o">().</span><span class="na">getString</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">register_succeed</span><span class="o">),</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_SHORT</span><span class="o">).</span><span class="na">show</span><span class="o">();</span>
                <span class="n">LoginActivity</span><span class="o">.</span><span class="na">display</span><span class="o">(</span><span class="n">RegisterActivity</span><span class="o">.</span><span class="na">this</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onRegisterFailed</span><span class="o">(</span><span class="n">String</span> <span class="n">errorCode</span><span class="o">,</span> <span class="n">String</span> <span class="n">errorMessage</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="n">RegisterActivity</span><span class="o">.</span><span class="na">this</span><span class="o">,</span> <span class="n">getResources</span><span class="o">().</span><span class="na">getString</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">error_register</span><span class="o">),</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_SHORT</span><span class="o">).</span><span class="na">show</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">});</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">getResources</span><span class="o">().</span><span class="na">getString</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">wrong_data</span><span class="o">)</span> <span class="o">,</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_SHORT</span><span class="o">).</span><span class="na">show</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>In this method, we get values entered in the <code>EditText</code> elements, e.g.: a user name, their email, password and repeated password (for a check).</p>
<p>Then using the isInputValid method we check that the fields are not left empty and that the values, entered into the two password fields are identical. Afterwards, we can run the <code>.register</code> method of the <code>User</code> class.</p>
<p>In case the user registration was a success (i.e. if the SDK is initiated, all keys are correct and there is no conflict with existing users), the interface <code>onRegisterSucceed(...) callback</code> method will be executed. Otherwise it is the <code>onRegisterFailed(...)</code> method that will be executed.</p>
<p>In this case, if the registration is a success, a Toast message will be shown with a note that the user is registered. Then the <code>LoginActivity</code> activity begins so that the user can log in and start working with the application.</p>
<h2 id="application-main-screen">Application Main Screen.</h2>
<p>Let's create the application main page called <code>MainActivity</code> and add the following xml code in the layout file of this Activity:</p>
<div class="codehilite"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="nt">&lt;RelativeLayout</span>
    <span class="na">xmlns:android=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span>
    <span class="na">xmlns:tools=</span><span class="s">&quot;http://schemas.android.com/tools&quot;</span>
    <span class="na">android:id=</span><span class="s">&quot;@+id/activity_main&quot;</span>
    <span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
    <span class="na">android:layout_height=</span><span class="s">&quot;match_parent&quot;</span>
    <span class="na">android:paddingLeft=</span><span class="s">&quot;@dimen/activity_horizontal_margin&quot;</span>
    <span class="na">android:paddingRight=</span><span class="s">&quot;@dimen/activity_horizontal_margin&quot;</span>
    <span class="na">android:paddingTop=</span><span class="s">&quot;@dimen/activity_vertical_margin&quot;</span>
    <span class="na">android:paddingBottom=</span><span class="s">&quot;@dimen/activity_vertical_margin&quot;</span>
    <span class="na">tools:context=</span><span class="s">&quot;prof_itgroup.ru.storehouseapp.Activities.MainActivity&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;ListView</span>
        <span class="na">android:id=</span><span class="s">&quot;@+id/lvItemsInStorehouse&quot;</span>
        <span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
        <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/RelativeLayout&gt;</span>
</pre></div>


<p>This is the <code>ListView</code> Activity which we fill with the data about goods stored in the database. In addition, the Activity contains <code>ActionBar</code> icons. We will talk about them in some detail later on. </p>
<p>Let's create an adapter called <code>StoreItemAdapter</code> to show us the data with the following code: </p>
<div class="codehilite"><pre><span></span><span class="kn">package</span> <span class="nn">prof_itgroup.ru.storehouseapp.Objects</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.content.Context</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.support.annotation.NonNull</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.view.LayoutInflater</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.view.View</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.view.ViewGroup</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.widget.BaseAdapter</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.widget.TextView</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">butterknife.BindView</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">butterknife.ButterKnife</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">prof_itgroup.ru.storehouseapp.Activities.ItemDetailsActivity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">prof_itgroup.ru.storehouseapp.R</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">ru.profit_group.scorocode_sdk.scorocode_objects.DocumentInfo</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">StoredItemsAdapter</span> <span class="kd">extends</span> <span class="n">BaseAdapter</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">Context</span> <span class="n">context</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">DocumentInfo</span><span class="o">&gt;</span> <span class="n">storedItems</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">layoutId</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">LayoutInflater</span> <span class="n">inflater</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">DocumentFields</span> <span class="n">fields</span><span class="o">;</span>
    <span class="kd">public</span> <span class="nf">StoredItemsAdapter</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">,</span> <span class="nd">@NonNull</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">DocumentInfo</span><span class="o">&gt;</span> <span class="n">storedItems</span><span class="o">,</span> <span class="kt">int</span> <span class="n">layoutId</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">context</span> <span class="o">=</span> <span class="n">context</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">storedItems</span> <span class="o">=</span> <span class="n">storedItems</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">layoutId</span> <span class="o">=</span> <span class="n">layoutId</span><span class="o">;</span>
        <span class="n">inflater</span> <span class="o">=</span> <span class="n">LayoutInflater</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">context</span><span class="o">);</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DocumentFields</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getCount</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">storedItems</span><span class="o">.</span><span class="na">size</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Object</span> <span class="nf">getItem</span><span class="o">(</span><span class="kt">int</span> <span class="n">position</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">storedItems</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">position</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">long</span> <span class="nf">getItemId</span><span class="o">(</span><span class="kt">int</span> <span class="n">position</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">position</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">View</span> <span class="nf">getView</span><span class="o">(</span><span class="kt">int</span> <span class="n">position</span><span class="o">,</span> <span class="n">View</span> <span class="n">view</span><span class="o">,</span> <span class="n">ViewGroup</span> <span class="n">parent</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">ViewHolder</span> <span class="n">holder</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">view</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">holder</span> <span class="o">=</span> <span class="o">(</span><span class="n">ViewHolder</span><span class="o">)</span> <span class="n">view</span><span class="o">.</span><span class="na">getTag</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">view</span> <span class="o">=</span> <span class="n">inflater</span><span class="o">.</span><span class="na">inflate</span><span class="o">(</span><span class="n">layoutId</span><span class="o">,</span> <span class="n">parent</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
            <span class="n">holder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ViewHolder</span><span class="o">(</span><span class="n">view</span><span class="o">);</span>
            <span class="n">view</span><span class="o">.</span><span class="na">setTag</span><span class="o">(</span><span class="n">holder</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">customizeView</span><span class="o">(</span><span class="n">view</span><span class="o">,</span> <span class="n">holder</span><span class="o">,</span> <span class="n">storedItems</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">position</span><span class="o">));</span>
        <span class="k">return</span> <span class="n">view</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">customizeView</span><span class="o">(</span><span class="n">View</span> <span class="n">view</span><span class="o">,</span> <span class="n">ViewHolder</span> <span class="n">holder</span><span class="o">,</span> <span class="kd">final</span> <span class="n">DocumentInfo</span> <span class="n">documentInfo</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">deviceName</span> <span class="o">=</span> <span class="o">(</span><span class="n">String</span><span class="o">)</span> <span class="n">documentInfo</span><span class="o">.</span><span class="na">getFields</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="n">fields</span><span class="o">.</span><span class="na">getDeviceNameField</span><span class="o">());</span>
        <span class="n">String</span> <span class="n">devicePlatform</span> <span class="o">=</span> <span class="o">(</span><span class="n">String</span><span class="o">)</span> <span class="n">documentInfo</span><span class="o">.</span><span class="na">getFields</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="n">fields</span><span class="o">.</span><span class="na">getPlatformField</span><span class="o">());</span>
        <span class="n">Double</span> <span class="n">devicePrice</span> <span class="o">=</span> <span class="o">(</span><span class="n">Double</span><span class="o">)</span> <span class="n">documentInfo</span><span class="o">.</span><span class="na">getFields</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="n">fields</span><span class="o">.</span><span class="na">getDevicePriceField</span><span class="o">());</span>
        <span class="n">holder</span><span class="o">.</span><span class="na">tvStoredItemName</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">deviceName</span><span class="o">);</span>
        <span class="n">holder</span><span class="o">.</span><span class="na">tvStoredItemStatus</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">devicePlatform</span><span class="o">);</span>
        <span class="n">holder</span><span class="o">.</span><span class="na">tvStoredItemPrice</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">devicePrice</span><span class="o">));</span>
        <span class="n">view</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">(</span><span class="k">new</span> <span class="n">View</span><span class="o">.</span><span class="na">OnClickListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onClick</span><span class="o">(</span><span class="n">View</span> <span class="n">v</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">ItemDetailsActivity</span><span class="o">.</span><span class="na">display</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">documentInfo</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">});</span>
    <span class="o">}</span>
    <span class="kd">static</span> <span class="kd">class</span> <span class="nc">ViewHolder</span> <span class="o">{</span>
        <span class="nd">@BindView</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">tvStoredItemName</span><span class="o">)</span> <span class="n">TextView</span> <span class="n">tvStoredItemName</span><span class="o">;</span>
        <span class="nd">@BindView</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">tvStoredItemPlatform</span><span class="o">)</span> <span class="n">TextView</span> <span class="n">tvStoredItemStatus</span><span class="o">;</span>
        <span class="nd">@BindView</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">tvStoredItemPrice</span><span class="o">)</span> <span class="n">TextView</span> <span class="n">tvStoredItemPrice</span><span class="o">;</span>
        <span class="kd">public</span> <span class="nf">ViewHolder</span><span class="o">(</span><span class="n">View</span> <span class="n">view</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">ButterKnife</span><span class="o">.</span><span class="na">bind</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">view</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>We will use the following layout file as a list element:</p>
<div class="codehilite"><pre><span></span> <span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="nt">&lt;RelativeLayout</span> <span class="na">xmlns:android=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span>
    <span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
    <span class="na">android:layout_height=</span><span class="s">&quot;match_parent&quot;</span>
    <span class="na">android:orientation=</span><span class="s">&quot;horizontal&quot;</span>
    <span class="na">android:padding=</span><span class="s">&quot;8dp&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;TextView</span>
        <span class="na">android:id=</span><span class="s">&quot;@+id/tvStoredItemName&quot;</span>
        <span class="na">style=</span><span class="s">&quot;@style/textStyle&quot;</span>
        <span class="na">android:layout_alignParentLeft=</span><span class="s">&quot;true&quot;</span>
        <span class="na">android:layout_toLeftOf=</span><span class="s">&quot;@+id/tvStoredItemPlatform&quot;</span>
        <span class="na">android:text=</span><span class="s">&quot;@string/storedItemName&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;TextView</span>
        <span class="na">android:id=</span><span class="s">&quot;@+id/tvStoredItemPlatform&quot;</span>
        <span class="na">style=</span><span class="s">&quot;@style/textStyle&quot;</span>
        <span class="na">android:layout_marginRight=</span><span class="s">&quot;32dp&quot;</span>
        <span class="na">android:layout_toLeftOf=</span><span class="s">&quot;@+id/tvStoredItemPrice&quot;</span>
        <span class="na">android:text=</span><span class="s">&quot;@string/storedItemStatus&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;TextView</span>
        <span class="na">android:id=</span><span class="s">&quot;@+id/tvStoredItemPrice&quot;</span>
        <span class="na">style=</span><span class="s">&quot;@style/textStyle&quot;</span>
        <span class="na">android:layout_alignParentRight=</span><span class="s">&quot;true&quot;</span>
        <span class="na">android:text=</span><span class="s">&quot;@string/storedItemPrice&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/RelativeLayout&gt;</span>
</pre></div>


<p>We will get the data about stored goods in the <code>onResume()</code> method of the <code>MainActivity</code>Activity. For this let's add the following code lines in the <code>onResume</code> method:</p>
<div class="codehilite"><pre><span></span><span class="nd">@Override</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onResume</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">onResume</span><span class="o">();</span>
    <span class="n">Query</span> <span class="n">query</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Query</span><span class="o">(</span><span class="n">COLLECTION_NAME</span><span class="o">);</span>
    <span class="n">query</span><span class="o">.</span><span class="na">findDocuments</span><span class="o">(</span><span class="k">new</span> <span class="n">CallbackFindDocument</span><span class="o">()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onDocumentFound</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">DocumentInfo</span><span class="o">&gt;</span> <span class="n">documentInfos</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span><span class="o">(</span><span class="n">documentInfos</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">setAdapter</span><span class="o">(</span><span class="n">documentInfos</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onDocumentNotFound</span><span class="o">(</span><span class="n">String</span> <span class="n">errorCode</span><span class="o">,</span> <span class="n">String</span> <span class="n">errorMessage</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="n">MainActivity</span><span class="o">.</span><span class="na">this</span><span class="o">,</span> <span class="n">getResources</span><span class="o">().</span><span class="na">getString</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">error_get_docs</span><span class="o">),</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_SHORT</span><span class="o">).</span><span class="na">show</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">});</span>
<span class="o">}</span>
</pre></div>


<p>In this code we create a <code>Query</code> object sample without setting any parameters (i.e. we choose the first 100 documents from this collection) and then we get the documents from our collection with the <code>findDocument</code> method.</p>
<p>In case we were successful in finding the documents, we install the adapter. Otherwise, we transmit the error message.</p>
<p>Let's also add the icons we need in the <code>ActionBar</code> Activity. For this, we will create the <code>main_activity_menu</code> layout file and add the following xml code:</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;menu</span> <span class="na">xmlns:android=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span>
    <span class="na">xmlns:app=</span><span class="s">&quot;http://schemas.android.com/apk/res-auto&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;item</span>
        <span class="na">android:id=</span><span class="s">&quot;@+id/action_add_item&quot;</span>
        <span class="na">android:icon=</span><span class="s">&quot;@drawable/ic_create_new_folder_white_24dp&quot;</span>
        <span class="na">android:title=</span><span class="s">&quot;@string/action_add_item&quot;</span>
        <span class="na">app:showAsAction=</span><span class="s">&quot;always&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;item</span>
        <span class="na">android:id=</span><span class="s">&quot;@+id/action_set_filter&quot;</span>
        <span class="na">android:icon=</span><span class="s">&quot;@drawable/ic_filter_list_white_24dp&quot;</span>
        <span class="na">android:title=</span><span class="s">&quot;@string/action_filter_item&quot;</span>
        <span class="na">app:showAsAction=</span><span class="s">&quot;ifRoom&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;item</span>
        <span class="na">android:id=</span><span class="s">&quot;@+id/action_logout&quot;</span>
        <span class="na">android:icon=</span><span class="s">&quot;@drawable/ic_exit_to_app_white_24dp&quot;</span>
        <span class="na">android:title=</span><span class="s">&quot;@string/action_logout_item&quot;</span>
        <span class="na">app:showAsAction=</span><span class="s">&quot;ifRoom&quot;</span><span class="nt">/&gt;</span>

<span class="nt">&lt;/menu&gt;</span>
</pre></div>


<p>This means that we will show icons "Add an item to the database", "Set a filter" and "Logout" in the  <code>ActionBar</code>. We can add these icons to the activity screen with the following code lines:</p>
<div class="codehilite"><pre><span></span><span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">onCreateOptionsMenu</span><span class="o">(</span><span class="n">Menu</span> <span class="n">menu</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">getMenuInflater</span><span class="o">().</span><span class="na">inflate</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">menu</span><span class="o">.</span><span class="na">main_activity_menu</span><span class="o">,</span> <span class="n">menu</span><span class="o">);</span>
    <span class="k">return</span> <span class="kd">super</span><span class="o">.</span><span class="na">onCreateOptionsMenu</span><span class="o">(</span><span class="n">menu</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>


<p>We will handle icons clicks with the method described below:</p>
<div class="codehilite"><pre><span></span><span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">onOptionsItemSelected</span><span class="o">(</span><span class="n">MenuItem</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">switch</span> <span class="o">(</span><span class="n">item</span><span class="o">.</span><span class="na">getItemId</span><span class="o">())</span> <span class="o">{</span>
        <span class="k">case</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">action_add_item</span><span class="o">:</span>
            <span class="n">AddItemActivity</span><span class="o">.</span><span class="na">display</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
            <span class="k">break</span><span class="o">;</span>

        <span class="k">case</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">action_set_filter</span><span class="o">:</span>
            <span class="k">new</span> <span class="n">FilterDialog</span><span class="o">(</span><span class="k">this</span><span class="o">).</span><span class="na">showFilterDialog</span><span class="o">(</span><span class="k">new</span> <span class="n">FilterDialog</span><span class="o">.</span><span class="na">CallbackFilterDialog</span><span class="o">()</span> <span class="o">{</span>
                <span class="nd">@Override</span>
                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onFilterApplied</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">DocumentInfo</span><span class="o">&gt;</span> <span class="n">documentInfo</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">setAdapter</span><span class="o">(</span><span class="n">documentInfo</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">});</span>
            <span class="k">break</span><span class="o">;</span>

        <span class="k">case</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">action_logout</span><span class="o">:</span>
            <span class="n">LoginActivity</span><span class="o">.</span><span class="na">logout</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
            <span class="k">break</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="kd">super</span><span class="o">.</span><span class="na">onOptionsItemSelected</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>


<p>The completed screen for this activity is shown in Figure 2.1</p>
<p><img alt="Main Application Screen" src="../img/Storehouse/2.1.png" /></p>
<p>Figure 2.1 — main application screen</p>
<p>On this screen, we can see available mobile phone models which are kept in our storehouse. The following icons are shown in the right upper corner:</p>
<p><img alt="Add a new item to the database" src="../img/Storehouse/2.1.1.png" /> - Add new item (mobile phone model) to the database.</p>
<p><img alt="Apply a filter to the list of items" src="../img/Storehouse/2.1.2.png" /> - Apply a filter to the list of items.</p>
<p><img alt="Logout a user" src="../img/Storehouse/2.1.3.png" /> - End an active session (logout).    </p>
<p>After clicking on the <img alt="Add a new device to the database" src="../img/Storehouse/2.1.1.png" /> button, a user switches to the item adding screen of the application. </p>
<h2 id="add-an-item-screen">Add an Item Screen</h2>
<p>Let's create an Acitivity called <code>AddItemActivity</code> and add the folowing xml code to its layout file:</p>
<div class="codehilite"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="nt">&lt;LinearLayout</span> <span class="na">xmlns:android=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span>
    <span class="na">xmlns:tools=</span><span class="s">&quot;http://schemas.android.com/tools&quot;</span>
    <span class="na">android:id=</span><span class="s">&quot;@+id/activity_add_item&quot;</span>
    <span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
    <span class="na">android:layout_height=</span><span class="s">&quot;match_parent&quot;</span>
    <span class="na">android:orientation=</span><span class="s">&quot;vertical&quot;</span>
    <span class="na">android:padding=</span><span class="s">&quot;8dp&quot;</span>
    <span class="na">tools:context=</span><span class="s">&quot;prof_itgroup.ru.storehouseapp.Activities.AddItemActivity&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;ScrollView</span>
        <span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
        <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;include</span> <span class="na">layout=</span><span class="s">&quot;@layout/item_core&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/ScrollView&gt;</span>
<span class="nt">&lt;/LinearLayout&gt;</span>
</pre></div>


<p>In turn, the activated item_core.xml file represents of the following lines:</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;LinearLayout</span> <span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
    <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span>
    <span class="na">android:orientation=</span><span class="s">&quot;vertical&quot;</span>
    <span class="na">xmlns:android=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;TextView</span>
        <span class="na">style=</span><span class="s">&quot;@style/label_style&quot;</span>
        <span class="na">android:text=</span><span class="s">&quot;@string/add_item_device_name&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;EditText</span>
        <span class="na">android:id=</span><span class="s">&quot;@+id/etDeviceName&quot;</span>
        <span class="na">style=</span><span class="s">&quot;@style/textStyle&quot;</span>
        <span class="na">android:hint=</span><span class="s">&quot;@string/add_item_hint_device_name&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;TextView</span>
        <span class="na">style=</span><span class="s">&quot;@style/label_style&quot;</span>
        <span class="na">android:text=</span><span class="s">&quot;@string/add_item_device_platform&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;EditText</span>
        <span class="na">android:id=</span><span class="s">&quot;@+id/etDevicePlatform&quot;</span>
        <span class="na">style=</span><span class="s">&quot;@style/textStyle&quot;</span>
        <span class="na">android:hint=</span><span class="s">&quot;@string/add_item_hint_device_platform&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;TextView</span>
        <span class="na">style=</span><span class="s">&quot;@style/label_style&quot;</span>
        <span class="na">android:text=</span><span class="s">&quot;@string/add_item_camera_info&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;EditText</span>
        <span class="na">android:id=</span><span class="s">&quot;@+id/etDeviceCameraInfo&quot;</span>
        <span class="na">style=</span><span class="s">&quot;@style/textStyle&quot;</span>
        <span class="na">android:hint=</span><span class="s">&quot;@string/add_item_hint_camera_info&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;TextView</span>
        <span class="na">style=</span><span class="s">&quot;@style/label_style&quot;</span>
        <span class="na">android:text=</span><span class="s">&quot;@string/add_item_available_colors_info&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;EditText</span>
        <span class="na">android:id=</span><span class="s">&quot;@+id/etDeviceColors&quot;</span>
        <span class="na">style=</span><span class="s">&quot;@style/textStyle&quot;</span>
        <span class="na">android:hint=</span><span class="s">&quot;@string/add_item_hint_available_colors_info&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;LinearLayout</span>
        <span class="na">android:id=</span><span class="s">&quot;@+id/llChangeColorList&quot;</span>
        <span class="na">android:visibility=</span><span class="s">&quot;gone&quot;</span>
        <span class="na">android:gravity=</span><span class="s">&quot;center_horizontal&quot;</span>
        <span class="na">android:orientation=</span><span class="s">&quot;horizontal&quot;</span>
        <span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
        <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;Button</span>
            <span class="na">android:id=</span><span class="s">&quot;@+id/btnAddColor&quot;</span>
            <span class="na">android:padding=</span><span class="s">&quot;12dp&quot;</span>
            <span class="na">android:layout_marginRight=</span><span class="s">&quot;8dp&quot;</span>
            <span class="na">android:text=</span><span class="s">&quot;@string/add_color&quot;</span>
            <span class="na">android:layout_width=</span><span class="s">&quot;wrap_content&quot;</span>
            <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;Button</span>
            <span class="na">android:id=</span><span class="s">&quot;@+id/btnRemoveColor&quot;</span>
            <span class="na">android:padding=</span><span class="s">&quot;12dp&quot;</span>
            <span class="na">android:layout_marginLeft=</span><span class="s">&quot;8dp&quot;</span>
            <span class="na">android:text=</span><span class="s">&quot;@string/remove_color&quot;</span>
            <span class="na">android:layout_width=</span><span class="s">&quot;wrap_content&quot;</span>
            <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/LinearLayout&gt;</span>
    <span class="nt">&lt;TextView</span>
        <span class="na">style=</span><span class="s">&quot;@style/label_style&quot;</span>
        <span class="na">android:text=</span><span class="s">&quot;@string/add_item_price&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;EditText</span>
        <span class="na">android:id=</span><span class="s">&quot;@+id/etDevicePrice&quot;</span>
        <span class="na">style=</span><span class="s">&quot;@style/textStyle&quot;</span>
        <span class="na">android:inputType=</span><span class="s">&quot;number&quot;</span>
        <span class="na">android:hint=</span><span class="s">&quot;@string/add_item_hint_available_amount_info&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;LinearLayout</span>
        <span class="na">android:id=</span><span class="s">&quot;@+id/llChangePrice&quot;</span>
        <span class="na">android:visibility=</span><span class="s">&quot;gone&quot;</span>
        <span class="na">android:gravity=</span><span class="s">&quot;center_horizontal&quot;</span>
        <span class="na">android:orientation=</span><span class="s">&quot;horizontal&quot;</span>
        <span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
        <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;Button</span>
            <span class="na">android:id=</span><span class="s">&quot;@+id/btnIncreaseCount&quot;</span>
            <span class="na">android:padding=</span><span class="s">&quot;8dp&quot;</span>
            <span class="na">android:layout_marginRight=</span><span class="s">&quot;8dp&quot;</span>
            <span class="na">android:text=</span><span class="s">&quot;@string/increase_item_count&quot;</span>
            <span class="na">android:layout_width=</span><span class="s">&quot;wrap_content&quot;</span>
            <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;Button</span>
            <span class="na">android:id=</span><span class="s">&quot;@+id/btnDecreaseCount&quot;</span>
            <span class="na">android:padding=</span><span class="s">&quot;8dp&quot;</span>
            <span class="na">android:layout_marginLeft=</span><span class="s">&quot;8dp&quot;</span>
            <span class="na">android:text=</span><span class="s">&quot;@string/decrease_item_count&quot;</span>
            <span class="na">android:layout_width=</span><span class="s">&quot;wrap_content&quot;</span>
            <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/LinearLayout&gt;</span>
    <span class="nt">&lt;LinearLayout</span>
        <span class="na">android:orientation=</span><span class="s">&quot;vertical&quot;</span>
        <span class="na">android:gravity=</span><span class="s">&quot;center&quot;</span>
        <span class="na">android:layout_gravity=</span><span class="s">&quot;center&quot;</span>
        <span class="na">android:layout_width=</span><span class="s">&quot;200dp&quot;</span>
        <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span>
        <span class="na">android:weightSum=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;Button</span>
            <span class="na">android:id=</span><span class="s">&quot;@+id/btnAddItem&quot;</span>
            <span class="na">android:padding=</span><span class="s">&quot;8dp&quot;</span>
            <span class="na">android:background=</span><span class="s">&quot;#64b5f6&quot;</span>
            <span class="na">android:textColor=</span><span class="s">&quot;@android:color/white&quot;</span>
            <span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
            <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span>
            <span class="na">android:layout_gravity=</span><span class="s">&quot;center_horizontal&quot;</span>
            <span class="na">android:layout_marginTop=</span><span class="s">&quot;8dp&quot;</span>
            <span class="na">android:text=</span><span class="s">&quot;@string/add&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;Button</span>
            <span class="na">android:id=</span><span class="s">&quot;@+id/btnClear&quot;</span>
            <span class="na">android:padding=</span><span class="s">&quot;8dp&quot;</span>
            <span class="na">android:background=</span><span class="s">&quot;#64b5f6&quot;</span>
            <span class="na">android:textColor=</span><span class="s">&quot;@android:color/white&quot;</span>
            <span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
            <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span>
            <span class="na">android:layout_gravity=</span><span class="s">&quot;center_horizontal&quot;</span>
            <span class="na">android:layout_marginTop=</span><span class="s">&quot;8dp&quot;</span>
            <span class="na">android:text=</span><span class="s">&quot;@string/button_clear&quot;</span>
            <span class="na">android:layout_weight=</span><span class="s">&quot;0.22&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/LinearLayout&gt;</span>
<span class="nt">&lt;/LinearLayout&gt;</span>
</pre></div>


<p>The final activity screen is shown in Fugure 2.2</p>
<p><img alt="Add an Item Screen" src="../img/Storehouse/2.2.png" /></p>
<p>Figure 2.2 — Add an Item screen.</p>
<p>On this screen, a user enters all necessary information about the device (item) and presses on the «ADD» button. With this, the program creates a new document, fills its fields and saves on a server. Let's add the following activities: defining a click handler for the «ADD» button which will run the method described below:</p>
<div class="codehilite"><pre><span></span><span class="nd">@OnClick</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">btnAddItem</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">onBtnAddItemClicked</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Document</span> <span class="n">document</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Document</span><span class="o">(</span><span class="n">MainActivity</span><span class="o">.</span><span class="na">COLLECTION_NAME</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">isAllFieldsFilled</span><span class="o">())</span> <span class="o">{</span>
        <span class="n">document</span><span class="o">.</span><span class="na">setField</span><span class="o">(</span><span class="n">fields</span><span class="o">.</span><span class="na">getDeviceNameField</span><span class="o">(),</span> <span class="n">getStringFrom</span><span class="o">(</span><span class="n">etDeviceName</span><span class="o">).</span><span class="na">trim</span><span class="o">());</span>
        <span class="n">document</span><span class="o">.</span><span class="na">setField</span><span class="o">(</span><span class="n">fields</span><span class="o">.</span><span class="na">getPlatformField</span><span class="o">(),</span> <span class="n">getStringFrom</span><span class="o">(</span><span class="n">etDevicePlatform</span><span class="o">).</span><span class="na">trim</span><span class="o">());</span>
        <span class="n">document</span><span class="o">.</span><span class="na">setField</span><span class="o">(</span><span class="n">fields</span><span class="o">.</span><span class="na">getCameraInfoField</span><span class="o">(),</span> <span class="n">getStringFrom</span><span class="o">(</span><span class="n">etDeviceCameraInfo</span><span class="o">).</span><span class="na">trim</span><span class="o">());</span>
        <span class="n">document</span><span class="o">.</span><span class="na">setField</span><span class="o">(</span><span class="n">fields</span><span class="o">.</span><span class="na">getColorsAvailableField</span><span class="o">(),</span> <span class="n">getColorsListFrom</span><span class="o">(</span><span class="n">getStringFrom</span><span class="o">(</span><span class="n">etDeviceColors</span><span class="o">)));</span>
        <span class="n">document</span><span class="o">.</span><span class="na">setField</span><span class="o">(</span><span class="n">fields</span><span class="o">.</span><span class="na">getDevicePriceField</span><span class="o">(),</span> <span class="n">Double</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">getStringFrom</span><span class="o">(</span><span class="n">etDevicePrice</span><span class="o">)));</span>
        <span class="n">document</span><span class="o">.</span><span class="na">saveDocument</span><span class="o">(</span><span class="k">new</span> <span class="n">CallbackDocumentSaved</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onDocumentSaved</span><span class="o">()</span> <span class="o">{</span>
                <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="n">AddItemActivity</span><span class="o">.</span><span class="na">this</span><span class="o">,</span> <span class="n">getString</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">succed_add_item</span><span class="o">),</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_SHORT</span><span class="o">).</span><span class="na">show</span><span class="o">();</span>
                <span class="n">finish</span><span class="o">();</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onDocumentSaveFailed</span><span class="o">(</span><span class="n">String</span> <span class="n">errorCode</span><span class="o">,</span> <span class="n">String</span> <span class="n">errorMessage</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="n">AddItemActivity</span><span class="o">.</span><span class="na">this</span><span class="o">,</span> <span class="n">getString</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">error_add_item</span><span class="o">),</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_SHORT</span><span class="o">).</span><span class="na">show</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">});</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">getString</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">wrong_data</span><span class="o">),</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_SHORT</span><span class="o">).</span><span class="na">show</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>In this method we create a sample of the <code>Document</code> class, check whether a user has provided all necessary information in the corresponding <code>EditText</code> fields and set the document fields with the <code>setField(…)</code> method. Then we save the document. Since the document was created without a connection with a real document form the database (i.e. without using the <code>getDocumentById()</code> method), the new created document with the set fields will be uploaded to a server.</p>
<p>Documents are stored in the Scorocode database as shown on Figure 2.3</p>
<p><img alt="Storing documents in the Scorocode database" src="../img/Storehouse/2.3.png" /></p>
<p>Figure 2.3 — storing documents in the Scorocode database.</p>
<p>Each document contains system and user's fields.
System fields are:</p>
<ol>
<li>id — unique document ID in the collection.</li>
<li>readACL — permission to read this document.</li>
<li>updateACL — permission to update this document.</li>
<li>removeACL — permission to delete this document.</li>
<li>createdAt — time of the document creation.</li>
<li>updatedAt - time of the document last update.</li>
</ol>
<p>A user can add other fields at their discretion with the «Add a field» button in the upper panel. They can also add a document with the «Add a document» button in the upper panel and enter data in the fields manually. For more information on the database upper panel features, please, see Scorocode documentation.</p>
<p>When clicking on the <img alt="Apply a filter to the list of items" src="../img/Storehouse/2.1.2.png" /> button a user enter the filter dialog screen.</p>
<p>Let's create this filter dialog screen. For this, we need to create the <code>FilterDialog</code> class using the following code:</p>
<div class="codehilite"><pre><span></span><span class="kn">package</span> <span class="nn">prof_itgroup.ru.storehouseapp.Objects</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.content.Context</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.content.DialogInterface</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.support.v7.app.AlertDialog</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.view.LayoutInflater</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.view.View</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.widget.CheckBox</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.widget.EditText</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Arrays</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">butterknife.ButterKnife</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">prof_itgroup.ru.storehouseapp.Activities.MainActivity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">prof_itgroup.ru.storehouseapp.Helpers.Helper</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">prof_itgroup.ru.storehouseapp.R</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">ru.profit_group.scorocode_sdk.Callbacks.CallbackFindDocument</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">ru.profit_group.scorocode_sdk.scorocode_objects.DocumentInfo</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">ru.profit_group.scorocode_sdk.scorocode_objects.Query</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FilterDialog</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">Context</span> <span class="n">context</span><span class="o">;</span>
    <span class="kd">public</span> <span class="nf">FilterDialog</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">context</span> <span class="o">=</span> <span class="n">context</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">showFilterDialog</span><span class="o">(</span><span class="kd">final</span> <span class="n">CallbackFilterDialog</span> <span class="n">callbackFilterDialog</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="n">View</span> <span class="n">v</span> <span class="o">=</span> <span class="n">LayoutInflater</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">context</span><span class="o">).</span><span class="na">inflate</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">filter_layout</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
        <span class="kd">final</span> <span class="n">CheckBox</span> <span class="n">cbPriceFilter</span> <span class="o">=</span> <span class="n">ButterKnife</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">v</span><span class="o">,</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">cbPriceFilter</span><span class="o">);</span>
        <span class="kd">final</span> <span class="n">CheckBox</span> <span class="n">cbPlatformFilter</span> <span class="o">=</span> <span class="n">ButterKnife</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">v</span><span class="o">,</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">cbPlatformFilter</span><span class="o">);</span>
        <span class="kd">final</span> <span class="n">CheckBox</span> <span class="n">cbColourFilter</span> <span class="o">=</span> <span class="n">ButterKnife</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">v</span><span class="o">,</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">cbColorFilter</span><span class="o">);</span>
        <span class="kd">final</span> <span class="n">EditText</span> <span class="n">etPlatformFilter</span> <span class="o">=</span> <span class="n">ButterKnife</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">v</span><span class="o">,</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">etPlatformFilter</span><span class="o">);</span>
        <span class="kd">final</span> <span class="n">EditText</span> <span class="n">etColors</span> <span class="o">=</span> <span class="n">ButterKnife</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">v</span><span class="o">,</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">etColors</span><span class="o">);</span>
        <span class="n">AlertDialog</span><span class="o">.</span><span class="na">Builder</span> <span class="n">builder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AlertDialog</span><span class="o">.</span><span class="na">Builder</span><span class="o">(</span><span class="n">context</span><span class="o">)</span>
                <span class="o">.</span><span class="na">setTitle</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">titleChooseFilterProperties</span><span class="o">)</span>
                <span class="o">.</span><span class="na">setPositiveButton</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">continue_action</span><span class="o">,</span> <span class="k">new</span> <span class="n">DialogInterface</span><span class="o">.</span><span class="na">OnClickListener</span><span class="o">()</span> <span class="o">{</span>
                    <span class="nd">@Override</span>
                    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onClick</span><span class="o">(</span><span class="n">DialogInterface</span> <span class="n">dialog</span><span class="o">,</span> <span class="kt">int</span> <span class="n">which</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">Query</span> <span class="n">query</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Query</span><span class="o">(</span><span class="n">MainActivity</span><span class="o">.</span><span class="na">COLLECTION_NAME</span><span class="o">);</span>
                        <span class="k">if</span> <span class="o">(</span><span class="n">cbPriceFilter</span><span class="o">.</span><span class="na">isChecked</span><span class="o">())</span> <span class="o">{</span>
                            <span class="n">setPriceFilter</span><span class="o">(</span><span class="n">v</span><span class="o">,</span> <span class="n">query</span><span class="o">);</span>
                        <span class="o">}</span>
                        <span class="k">if</span> <span class="o">(</span><span class="n">cbPlatformFilter</span><span class="o">.</span><span class="na">isChecked</span><span class="o">())</span> <span class="o">{</span>
                            <span class="n">query</span><span class="o">.</span><span class="na">equalTo</span><span class="o">(</span><span class="k">new</span> <span class="n">DocumentFields</span><span class="o">(</span><span class="n">context</span><span class="o">).</span><span class="na">getPlatformField</span><span class="o">(),</span> <span class="n">etPlatformFilter</span><span class="o">.</span><span class="na">getText</span><span class="o">().</span><span class="na">toString</span><span class="o">());</span>
                        <span class="o">}</span>
                        <span class="k">if</span><span class="o">(</span><span class="n">cbColourFilter</span><span class="o">.</span><span class="na">isChecked</span><span class="o">())</span> <span class="o">{</span>
                            <span class="n">List</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span> <span class="n">colors</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
                            <span class="n">colors</span><span class="o">.</span><span class="na">addAll</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">Helper</span><span class="o">.</span><span class="na">getStringFrom</span><span class="o">(</span><span class="n">etColors</span><span class="o">).</span><span class="na">split</span><span class="o">(</span><span class="s">&quot;,&quot;</span><span class="o">)));</span>
                            <span class="n">query</span><span class="o">.</span><span class="na">containedIn</span><span class="o">(</span><span class="k">new</span> <span class="n">DocumentFields</span><span class="o">(</span><span class="n">context</span><span class="o">).</span><span class="na">getColorsAvailableField</span><span class="o">(),</span> <span class="n">colors</span><span class="o">);</span>
                        <span class="o">}</span>
                        <span class="n">query</span><span class="o">.</span><span class="na">findDocuments</span><span class="o">(</span><span class="k">new</span> <span class="n">CallbackFindDocument</span><span class="o">()</span> <span class="o">{</span>
                            <span class="nd">@Override</span>
                            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onDocumentFound</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">DocumentInfo</span><span class="o">&gt;</span> <span class="n">documentInfos</span><span class="o">)</span> <span class="o">{</span>
                                 <span class="n">callbackFilterDialog</span><span class="o">.</span><span class="na">onFilterApplied</span><span class="o">(</span><span class="n">documentInfos</span><span class="o">);</span>
                            <span class="o">}</span>
                            <span class="nd">@Override</span>
                            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onDocumentNotFound</span><span class="o">(</span><span class="n">String</span> <span class="n">errorCode</span><span class="o">,</span> <span class="n">String</span> <span class="n">errorMessage</span><span class="o">)</span> <span class="o">{</span>
                                <span class="n">Helper</span><span class="o">.</span><span class="na">showToast</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">error</span><span class="o">);</span>
                            <span class="o">}</span>
                        <span class="o">});</span>
                    <span class="o">}</span>
                <span class="o">}).</span><span class="na">setView</span><span class="o">(</span><span class="n">v</span><span class="o">);</span>
        <span class="n">builder</span><span class="o">.</span><span class="na">show</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">setPriceFilter</span><span class="o">(</span><span class="n">View</span> <span class="n">view</span><span class="o">,</span> <span class="n">Query</span> <span class="n">query</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">priceField</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DocumentFields</span><span class="o">(</span><span class="n">view</span><span class="o">.</span><span class="na">getContext</span><span class="o">()).</span><span class="na">getDevicePriceField</span><span class="o">();</span>
        <span class="kd">final</span> <span class="n">CheckBox</span> <span class="n">cbIncludeLower</span> <span class="o">=</span> <span class="n">ButterKnife</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">view</span><span class="o">,</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">cbIncludeLower</span><span class="o">);</span>
        <span class="kd">final</span> <span class="n">CheckBox</span> <span class="n">cbIncludeUpper</span> <span class="o">=</span> <span class="n">ButterKnife</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">view</span><span class="o">,</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">cbIncludeUpper</span><span class="o">);</span>
        <span class="kd">final</span> <span class="n">EditText</span> <span class="n">etLowerPrice</span> <span class="o">=</span> <span class="n">ButterKnife</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">view</span><span class="o">,</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">etPriceFrom</span><span class="o">);</span>
        <span class="kd">final</span> <span class="n">EditText</span> <span class="n">etUpperPrice</span> <span class="o">=</span> <span class="n">ButterKnife</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">view</span><span class="o">,</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">etPriceTo</span><span class="o">);</span>
        <span class="k">if</span><span class="o">(</span><span class="n">cbIncludeLower</span><span class="o">.</span><span class="na">isChecked</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">query</span><span class="o">.</span><span class="na">greaterThenOrEqualTo</span><span class="o">(</span><span class="n">priceField</span><span class="o">,</span> <span class="n">getPrice</span><span class="o">(</span><span class="n">etLowerPrice</span><span class="o">));</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">query</span><span class="o">.</span><span class="na">greaterThan</span><span class="o">(</span><span class="n">priceField</span><span class="o">,</span> <span class="n">getPrice</span><span class="o">(</span><span class="n">etLowerPrice</span><span class="o">));</span>
        <span class="o">}</span>
        <span class="k">if</span><span class="o">(</span><span class="n">cbIncludeUpper</span><span class="o">.</span><span class="na">isChecked</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">query</span><span class="o">.</span><span class="na">lessThanOrEqualTo</span><span class="o">(</span><span class="n">priceField</span><span class="o">,</span> <span class="n">getPrice</span><span class="o">(</span><span class="n">etUpperPrice</span><span class="o">));</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">query</span><span class="o">.</span><span class="na">lessThan</span><span class="o">(</span><span class="n">priceField</span><span class="o">,</span> <span class="n">getPrice</span><span class="o">(</span><span class="n">etUpperPrice</span><span class="o">));</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="kd">private</span> <span class="n">Double</span> <span class="nf">getPrice</span><span class="o">(</span><span class="n">EditText</span> <span class="n">etPrice</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">price</span> <span class="o">=</span> <span class="n">etPrice</span><span class="o">.</span><span class="na">getText</span><span class="o">().</span><span class="na">toString</span><span class="o">();</span>
        <span class="n">Double</span> <span class="n">priceDouble</span> <span class="o">=</span> <span class="mf">0d</span><span class="o">;</span>
        <span class="k">if</span><span class="o">(!</span><span class="n">price</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">priceDouble</span> <span class="o">=</span> <span class="n">Double</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">price</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">priceDouble</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">CallbackFilterDialog</span> <span class="o">{</span>
        <span class="kt">void</span> <span class="nf">onFilterApplied</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">DocumentInfo</span><span class="o">&gt;</span> <span class="n">documentInfo</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>In the <code>showFilterDialog</code> method we create <code>AlertDialog</code> and set its <code>View</code> from the following layout file:</p>
<div class="codehilite"><pre><span></span> <span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="nt">&lt;LinearLayout</span> <span class="na">xmlns:android=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span>
    <span class="na">android:orientation=</span><span class="s">&quot;vertical&quot;</span>
    <span class="na">android:padding=</span><span class="s">&quot;16dp&quot;</span>
    <span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
    <span class="na">android:layout_height=</span><span class="s">&quot;match_parent&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;include</span> <span class="na">layout=</span><span class="s">&quot;@layout/price_filter_layout&quot;</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;include</span> <span class="na">layout=</span><span class="s">&quot;@layout/dilimeter&quot;</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;include</span> <span class="na">layout=</span><span class="s">&quot;@layout/platform_filter&quot;</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;include</span> <span class="na">layout=</span><span class="s">&quot;@layout/dilimeter&quot;</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;LinearLayout</span>
        <span class="na">android:orientation=</span><span class="s">&quot;horizontal&quot;</span>
        <span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
        <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;CheckBox</span>
            <span class="na">android:id=</span><span class="s">&quot;@+id/cbColorFilter&quot;</span>
            <span class="na">android:layout_width=</span><span class="s">&quot;wrap_content&quot;</span>
            <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;TextView</span>
            <span class="na">android:text=</span><span class="s">&quot;@string/colorsFilter&quot;</span>
            <span class="na">style=</span><span class="s">&quot;@style/label_style&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;EditText</span>
            <span class="na">android:id=</span><span class="s">&quot;@+id/etColors&quot;</span>
            <span class="na">android:layout_marginLeft=</span><span class="s">&quot;16dp&quot;</span>
            <span class="na">android:hint=</span><span class="s">&quot;@string/color_filter_hint&quot;</span>
            <span class="na">style=</span><span class="s">&quot;@style/label_style&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/LinearLayout&gt;</span>
<span class="nt">&lt;/LinearLayout&gt;</span>
</pre></div>


<p>The layout files <code>price_filter_layout</code> and <code>platform_filter</code> are shown below:</p>
<div class="codehilite"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="nt">&lt;LinearLayout</span> <span class="na">xmlns:android=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span>
    <span class="na">xmlns:tools=</span><span class="s">&quot;http://schemas.android.com/tools&quot;</span>
    <span class="na">android:orientation=</span><span class="s">&quot;vertical&quot;</span>
    <span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
    <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span>
    <span class="na">tools:showIn=</span><span class="s">&quot;@layout/filter_layout&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;LinearLayout</span>
        <span class="na">android:orientation=</span><span class="s">&quot;horizontal&quot;</span>
        <span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
        <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;CheckBox</span>
            <span class="na">android:id=</span><span class="s">&quot;@+id/cbPriceFilter&quot;</span>
            <span class="na">android:layout_width=</span><span class="s">&quot;wrap_content&quot;</span>
            <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;TextView</span>
            <span class="na">android:layout_marginLeft=</span><span class="s">&quot;8dp&quot;</span>
            <span class="na">android:layout_marginStart=</span><span class="s">&quot;8dp&quot;</span>
            <span class="na">android:text=</span><span class="s">&quot;@string/filter_price_from&quot;</span>
            <span class="na">style=</span><span class="s">&quot;@style/label_style&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;EditText</span>
            <span class="na">android:id=</span><span class="s">&quot;@+id/etPriceFrom&quot;</span>
            <span class="na">android:layout_marginLeft=</span><span class="s">&quot;4dp&quot;</span>
            <span class="na">android:layout_marginStart=</span><span class="s">&quot;4dp&quot;</span>
            <span class="na">android:minWidth=</span><span class="s">&quot;60dp&quot;</span>
            <span class="na">android:layout_width=</span><span class="s">&quot;wrap_content&quot;</span>
            <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;TextView</span>
            <span class="na">android:text=</span><span class="s">&quot;@string/filter_price_up_to&quot;</span>
            <span class="na">android:layout_width=</span><span class="s">&quot;wrap_content&quot;</span>
            <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;EditText</span>
            <span class="na">android:id=</span><span class="s">&quot;@+id/etPriceTo&quot;</span>
            <span class="na">android:layout_marginLeft=</span><span class="s">&quot;4dp&quot;</span>
            <span class="na">android:layout_marginStart=</span><span class="s">&quot;4dp&quot;</span>
            <span class="na">android:minWidth=</span><span class="s">&quot;60dp&quot;</span>
            <span class="na">style=</span><span class="s">&quot;@style/label_style&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/LinearLayout&gt;</span>
    <span class="nt">&lt;RelativeLayout</span>
        <span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
        <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;LinearLayout</span>
            <span class="na">android:id=</span><span class="s">&quot;@+id/llLowerBound&quot;</span>
            <span class="na">android:layout_marginLeft=</span><span class="s">&quot;32dp&quot;</span>
            <span class="na">android:layout_alignParentLeft=</span><span class="s">&quot;true&quot;</span>
            <span class="na">android:orientation=</span><span class="s">&quot;horizontal&quot;</span>
            <span class="na">android:layout_width=</span><span class="s">&quot;wrap_content&quot;</span>
            <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;CheckBox</span>
                <span class="na">android:id=</span><span class="s">&quot;@+id/cbIncludeLower&quot;</span>
                <span class="na">android:layout_width=</span><span class="s">&quot;wrap_content&quot;</span>
                <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;TextView</span>
                <span class="na">android:layout_gravity=</span><span class="s">&quot;fill&quot;</span>
                <span class="na">android:text=</span><span class="s">&quot;@string/include_lower&quot;</span>
                <span class="na">style=</span><span class="s">&quot;@style/label_style&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/LinearLayout&gt;</span>
        <span class="nt">&lt;LinearLayout</span>
            <span class="na">android:layout_marginLeft=</span><span class="s">&quot;160dp&quot;</span>
            <span class="na">android:orientation=</span><span class="s">&quot;horizontal&quot;</span>
            <span class="na">android:layout_width=</span><span class="s">&quot;wrap_content&quot;</span>
            <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;CheckBox</span>
                <span class="na">android:id=</span><span class="s">&quot;@+id/cbIncludeUpper&quot;</span>
                <span class="na">android:layout_width=</span><span class="s">&quot;wrap_content&quot;</span>
                <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;TextView</span>
                <span class="na">android:layout_gravity=</span><span class="s">&quot;fill&quot;</span>
                <span class="na">android:text=</span><span class="s">&quot;@string/include_upper&quot;</span>
                <span class="na">style=</span><span class="s">&quot;@style/label_style&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/LinearLayout&gt;</span>
    <span class="nt">&lt;/RelativeLayout&gt;</span>
<span class="nt">&lt;/LinearLayout&gt;</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="nt">&lt;LinearLayout</span> <span class="na">xmlns:android=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span>
    <span class="na">xmlns:tools=</span><span class="s">&quot;http://schemas.android.com/tools&quot;</span>
    <span class="na">android:orientation=</span><span class="s">&quot;horizontal&quot;</span>
    <span class="na">android:layout_width=</span><span class="s">&quot;wrap_content&quot;</span>
    <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span>
    <span class="na">tools:showIn=</span><span class="s">&quot;@layout/filter_layout&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;CheckBox</span>
        <span class="na">android:id=</span><span class="s">&quot;@+id/cbPlatformFilter&quot;</span>
        <span class="na">android:layout_width=</span><span class="s">&quot;wrap_content&quot;</span>
        <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;TextView</span>
        <span class="na">android:layout_marginLeft=</span><span class="s">&quot;8dp&quot;</span>
        <span class="na">android:layout_marginStart=</span><span class="s">&quot;8dp&quot;</span>
        <span class="na">android:text=</span><span class="s">&quot;@string/filter_platform&quot;</span>
        <span class="na">style=</span><span class="s">&quot;@style/label_style&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;EditText</span>
        <span class="na">android:id=</span><span class="s">&quot;@+id/etPlatformFilter&quot;</span>
        <span class="na">android:layout_marginLeft=</span><span class="s">&quot;4dp&quot;</span>
        <span class="na">android:layout_marginStart=</span><span class="s">&quot;4dp&quot;</span>
        <span class="na">android:minWidth=</span><span class="s">&quot;60dp&quot;</span>
        <span class="na">android:layout_width=</span><span class="s">&quot;wrap_content&quot;</span>
        <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/LinearLayout&gt;</span>
</pre></div>


<p>The filter dialog screen is shown in Figure 2.4</p>
<p><img alt="Filter Dialog Screen" src="../img/Storehouse/2.4.png" /></p>
<p>Figure 2.4 — filter dialog screen.</p>
<p>On this dialog screen, a user can specify database sample criteria as follows:
<em> Device price
</em> Device platform (Android or iOS, plus operation system version number).
* Available colours.</p>
<p>When pressing the «Continue» button, we check whether the CheckBox elements were chosen and, if yes, we set the corresponding filter.</p>
<p>Code listing for setting a filter:  </p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kt">void</span> <span class="nf">showFilterDialog</span><span class="o">(</span><span class="kd">final</span> <span class="n">CallbackFilterDialog</span> <span class="n">callbackFilterDialog</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="n">View</span> <span class="n">v</span> <span class="o">=</span> <span class="n">LayoutInflater</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">context</span><span class="o">).</span><span class="na">inflate</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">filter_layout</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
    <span class="kd">final</span> <span class="n">CheckBox</span> <span class="n">cbPriceFilter</span> <span class="o">=</span> <span class="n">ButterKnife</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">v</span><span class="o">,</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">cbPriceFilter</span><span class="o">);</span>
    <span class="kd">final</span> <span class="n">CheckBox</span> <span class="n">cbPlatformFilter</span> <span class="o">=</span> <span class="n">ButterKnife</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">v</span><span class="o">,</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">cbPlatformFilter</span><span class="o">);</span>
    <span class="kd">final</span> <span class="n">CheckBox</span> <span class="n">cbColourFilter</span> <span class="o">=</span> <span class="n">ButterKnife</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">v</span><span class="o">,</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">cbColorFilter</span><span class="o">);</span>
    <span class="kd">final</span> <span class="n">EditText</span> <span class="n">etPlatformFilter</span> <span class="o">=</span> <span class="n">ButterKnife</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">v</span><span class="o">,</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">etPlatformFilter</span><span class="o">);</span>
    <span class="kd">final</span> <span class="n">EditText</span> <span class="n">etColors</span> <span class="o">=</span> <span class="n">ButterKnife</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">v</span><span class="o">,</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">etColors</span><span class="o">);</span>

    <span class="n">AlertDialog</span><span class="o">.</span><span class="na">Builder</span> <span class="n">builder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AlertDialog</span><span class="o">.</span><span class="na">Builder</span><span class="o">(</span><span class="n">context</span><span class="o">)</span>
            <span class="o">.</span><span class="na">setTitle</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">titleChooseFilterProperties</span><span class="o">)</span>
            <span class="o">.</span><span class="na">setPositiveButton</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">continue_action</span><span class="o">,</span> <span class="k">new</span> <span class="n">DialogInterface</span><span class="o">.</span><span class="na">OnClickListener</span><span class="o">()</span> <span class="o">{</span>
                <span class="nd">@Override</span>
                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onClick</span><span class="o">(</span><span class="n">DialogInterface</span> <span class="n">dialog</span><span class="o">,</span> <span class="kt">int</span> <span class="n">which</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">Query</span> <span class="n">query</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Query</span><span class="o">(</span><span class="n">MainActivity</span><span class="o">.</span><span class="na">COLLECTION_NAME</span><span class="o">);</span>
                    <span class="k">if</span> <span class="o">(</span><span class="n">cbPriceFilter</span><span class="o">.</span><span class="na">isChecked</span><span class="o">())</span> <span class="o">{</span>
                        <span class="n">setPriceFilter</span><span class="o">(</span><span class="n">v</span><span class="o">,</span> <span class="n">query</span><span class="o">);</span>
                    <span class="o">}</span>

                    <span class="k">if</span> <span class="o">(</span><span class="n">cbPlatformFilter</span><span class="o">.</span><span class="na">isChecked</span><span class="o">())</span> <span class="o">{</span>
                        <span class="n">query</span><span class="o">.</span><span class="na">equalTo</span><span class="o">(</span><span class="k">new</span> <span class="n">DocumentFields</span><span class="o">(</span><span class="n">context</span><span class="o">).</span><span class="na">getPlatformField</span><span class="o">(),</span> <span class="n">etPlatformFilter</span><span class="o">.</span><span class="na">getText</span><span class="o">().</span><span class="na">toString</span><span class="o">());</span>
                    <span class="o">}</span>

                    <span class="k">if</span><span class="o">(</span><span class="n">cbColourFilter</span><span class="o">.</span><span class="na">isChecked</span><span class="o">())</span> <span class="o">{</span>
                        <span class="n">List</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span> <span class="n">colors</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
                        <span class="n">colors</span><span class="o">.</span><span class="na">addAll</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">Helper</span><span class="o">.</span><span class="na">getStringFrom</span><span class="o">(</span><span class="n">etColors</span><span class="o">).</span><span class="na">split</span><span class="o">(</span><span class="s">&quot;,&quot;</span><span class="o">)));</span>
                        <span class="n">query</span><span class="o">.</span><span class="na">containedIn</span><span class="o">(</span><span class="k">new</span> <span class="n">DocumentFields</span><span class="o">(</span><span class="n">context</span><span class="o">).</span><span class="na">getColorsAvailableField</span><span class="o">(),</span> <span class="n">colors</span><span class="o">);</span>
                    <span class="o">}</span>
                    <span class="n">query</span><span class="o">.</span><span class="na">findDocuments</span><span class="o">(</span><span class="k">new</span> <span class="n">CallbackFindDocument</span><span class="o">()</span> <span class="o">{</span>
                        <span class="nd">@Override</span>
                        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onDocumentFound</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">DocumentInfo</span><span class="o">&gt;</span> <span class="n">documentInfos</span><span class="o">)</span> <span class="o">{</span>
                             <span class="n">callbackFilterDialog</span><span class="o">.</span><span class="na">onFilterApplied</span><span class="o">(</span><span class="n">documentInfos</span><span class="o">);</span>
                        <span class="o">}</span>
                        <span class="nd">@Override</span>
                        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onDocumentNotFound</span><span class="o">(</span><span class="n">String</span> <span class="n">errorCode</span><span class="o">,</span> <span class="n">String</span> <span class="n">errorMessage</span><span class="o">)</span> <span class="o">{</span>
                            <span class="n">Helper</span><span class="o">.</span><span class="na">showToast</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">error</span><span class="o">);</span>
                        <span class="o">}</span>
                    <span class="o">});</span>
                <span class="o">}</span>
            <span class="o">}).</span><span class="na">setView</span><span class="o">(</span><span class="n">v</span><span class="o">);</span>
    <span class="n">builder</span><span class="o">.</span><span class="na">show</span><span class="o">();</span>
<span class="o">}</span>

<span class="kd">private</span> <span class="kt">void</span> <span class="nf">setPriceFilter</span><span class="o">(</span><span class="n">View</span> <span class="n">view</span><span class="o">,</span> <span class="n">Query</span> <span class="n">query</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">String</span> <span class="n">priceField</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DocumentFields</span><span class="o">(</span><span class="n">view</span><span class="o">.</span><span class="na">getContext</span><span class="o">()).</span><span class="na">getDevicePriceField</span><span class="o">();</span>
    <span class="kd">final</span> <span class="n">CheckBox</span> <span class="n">cbIncludeLower</span> <span class="o">=</span> <span class="n">ButterKnife</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">view</span><span class="o">,</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">cbIncludeLower</span><span class="o">);</span>
    <span class="kd">final</span> <span class="n">CheckBox</span> <span class="n">cbIncludeUpper</span> <span class="o">=</span> <span class="n">ButterKnife</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">view</span><span class="o">,</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">cbIncludeUpper</span><span class="o">);</span>
    <span class="kd">final</span> <span class="n">EditText</span> <span class="n">etLowerPrice</span> <span class="o">=</span> <span class="n">ButterKnife</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">view</span><span class="o">,</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">etPriceFrom</span><span class="o">);</span>
    <span class="kd">final</span> <span class="n">EditText</span> <span class="n">etUpperPrice</span> <span class="o">=</span> <span class="n">ButterKnife</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">view</span><span class="o">,</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">etPriceTo</span><span class="o">);</span>
    <span class="k">if</span><span class="o">(</span><span class="n">cbIncludeLower</span><span class="o">.</span><span class="na">isChecked</span><span class="o">())</span> <span class="o">{</span>
        <span class="n">query</span><span class="o">.</span><span class="na">greaterThenOrEqualTo</span><span class="o">(</span><span class="n">priceField</span><span class="o">,</span> <span class="n">getPrice</span><span class="o">(</span><span class="n">etLowerPrice</span><span class="o">));</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="n">query</span><span class="o">.</span><span class="na">greaterThan</span><span class="o">(</span><span class="n">priceField</span><span class="o">,</span> <span class="n">getPrice</span><span class="o">(</span><span class="n">etLowerPrice</span><span class="o">));</span>
    <span class="o">}</span>
    <span class="k">if</span><span class="o">(</span><span class="n">cbIncludeUpper</span><span class="o">.</span><span class="na">isChecked</span><span class="o">())</span> <span class="o">{</span>
        <span class="n">query</span><span class="o">.</span><span class="na">lessThanOrEqualTo</span><span class="o">(</span><span class="n">priceField</span><span class="o">,</span> <span class="n">getPrice</span><span class="o">(</span><span class="n">etUpperPrice</span><span class="o">));</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="n">query</span><span class="o">.</span><span class="na">lessThan</span><span class="o">(</span><span class="n">priceField</span><span class="o">,</span> <span class="n">getPrice</span><span class="o">(</span><span class="n">etUpperPrice</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>A filter can be set as follows: we create a <code>Query</code> object, taking samples from our collection. If the price filter is applied (it is ticked off), then we choose only the devices within the set price range in our database.</p>
<p>The price range is set with the following methods:
<em> greaterThan sets the lower price limit (excluding the quoted price number).
</em> lessThan sets the upper price limit (excluding the quoted price number).
<em> greaterThanOrEqualTo sets the lower price limit including the quoted price number. 
</em> lessThanOrEqualTo sets the upper price limit including the quoted price number.</p>
<p>Platform search is set using the <code>equalTo(field, value)</code> method of the <code>Query</code> class which tells to an instance of the class to leave inside the sample only the documents whose field value in the <code>field</code> parameter corresponds to the <code>value</code>. As an example in our case, we can find all Android 7.0 devices by setting <code>query.equalTo(«platform», «Android 7.0»);</code>.</p>
<p>Colour search is set using the <code>containedIn</code> method of the <code>Query</code> class which leaves leave inside the sample only the documents  whose fields (array) contains all elements of the given array.</p>
<p>With this we form a query for the given database collection and receive copies of the <code>DocumentInfo</code> class which characterize the documents appropriate for this query. We pass this information in the Activity using a callback and them we update the information.</p>
<p>When pressing the <img alt="Logout a user" src="../img/Storehouse/2.1.3.png" /> button we end the user active session (logout) so the user is back at the Launch Screen.</p>
<p>To achieve this we need to set a click event handler for this button, it will run <code>logout</code> of the <code>User</code> class to end the active session:</p>
<p><div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">logout</span><span class="o">(</span><span class="kd">final</span> <span class="n">Context</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">LocalPersistence</span><span class="o">.</span><span class="na">writeObjectToFile</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="n">LocalPersistence</span><span class="o">.</span><span class="na">FILE_USER_INFO</span><span class="o">);</span>
    <span class="k">new</span> <span class="n">User</span><span class="o">().</span><span class="na">logout</span><span class="o">(</span><span class="k">new</span> <span class="n">CallbackLogoutUser</span><span class="o">()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onLogoutSucceed</span><span class="o">()</span> <span class="o">{</span>
            <span class="n">display</span><span class="o">(</span><span class="n">context</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onLogoutFailed</span><span class="o">(</span><span class="n">String</span> <span class="n">errorCode</span><span class="o">,</span> <span class="n">String</span> <span class="n">errorMessage</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">Helper</span><span class="o">.</span><span class="na">showToast</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">error</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">});</span>
<span class="o">}</span>
</pre></div>

In this method, as our first step we need to take is to delete the user data file (the file is stored locally and is used to check whether the user was identified). Then we use the <code>logout(…)</code> method of the <code>User</code> class which ends the user active session.</p>
<p>In case the session was ended successfully the <code>onLogoutSucceed(...) callback</code> iterface method will be executed. Otherwise, it is the  <code>onLogoutFailed(...)</code> method that will be executed.</p>
<h2 id="device-details-screen">Device Details Screen.</h2>
<p>When pressing on any element of the device list on the application main screen, a user moves to the screen with detailed information about the chosen device.</p>
<p>Let's create an Activity called <code>ItemDetailsInfo</code> and add the following xml code to its layout file:</p>
<div class="codehilite"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="nt">&lt;LinearLayout</span> <span class="na">xmlns:android=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span>
    <span class="na">xmlns:tools=</span><span class="s">&quot;http://schemas.android.com/tools&quot;</span>
    <span class="na">android:id=</span><span class="s">&quot;@+id/activity_detailed_item_info&quot;</span>
    <span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
    <span class="na">android:layout_height=</span><span class="s">&quot;match_parent&quot;</span>
    <span class="na">android:padding=</span><span class="s">&quot;16dp&quot;</span>
    <span class="na">android:orientation=</span><span class="s">&quot;vertical&quot;</span>
    <span class="na">tools:context=</span><span class="s">&quot;prof_itgroup.ru.storehouseapp.Activities.ItemDetailsActivity&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;ScrollView</span>
        <span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
        <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;include</span> <span class="na">layout=</span><span class="s">&quot;@layout/item_core&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/ScrollView&gt;</span>
<span class="nt">&lt;/LinearLayout&gt;</span>
</pre></div>


<p>As you can see, the Activity layout file re-uses xml code of the Add an Item screen yet this screen also presents a possibility to switch to the Edit mode, i.e. to activate hidden <code>View</code> of the screen.</p>
<p>In <code>ActionBar</code> of the screen we will also add icons to edit a device entry (document), to remove a device entry (document) and to proceed to the delivery information screen.</p>
<p>To set the icons in <code>ActionBar</code> let's create a layout file called <code>detailed_info_menu</code> and add to it the following code lines:</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;menu</span> <span class="na">xmlns:android=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span>
    <span class="na">xmlns:app=</span><span class="s">&quot;http://schemas.android.com/apk/res-auto&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;item</span>
        <span class="na">android:id=</span><span class="s">&quot;@+id/action_edit_item&quot;</span>
        <span class="na">android:title=</span><span class="s">&quot;@string/action_edit_item&quot;</span>
        <span class="na">android:icon=</span><span class="s">&quot;@drawable/ic_mode_edit_white_24dp&quot;</span>
        <span class="na">app:showAsAction=</span><span class="s">&quot;always&quot;</span><span class="nt">/&gt;</span>

    <span class="nt">&lt;item</span>
        <span class="na">android:id=</span><span class="s">&quot;@+id/action_remove_item&quot;</span>
        <span class="na">android:title=</span><span class="s">&quot;@string/action_remove_item&quot;</span>
        <span class="na">android:icon=</span><span class="s">&quot;@drawable/ic_delete_forever_white_24dp&quot;</span>
        <span class="na">app:showAsAction=</span><span class="s">&quot;ifRoom&quot;</span><span class="nt">/&gt;</span>

     <span class="nt">&lt;item</span>
        <span class="na">android:id=</span><span class="s">&quot;@+id/action_prepare_item&quot;</span>
        <span class="na">android:icon=</span><span class="s">&quot;@drawable/ic_assignment_white_24dp&quot;</span>
        <span class="na">android:title=</span><span class="s">&quot;@string/action_prepare_item&quot;</span>
        <span class="na">app:showAsAction=</span><span class="s">&quot;ifRoom&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/menu&gt;</span>
</pre></div>


<p>Inside the Activity let's add the following method:</p>
<div class="codehilite"><pre><span></span><span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">onCreateOptionsMenu</span><span class="o">(</span><span class="n">Menu</span> <span class="n">menu</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">getMenuInflater</span><span class="o">().</span><span class="na">inflate</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">menu</span><span class="o">.</span><span class="na">detailed_info_menu</span><span class="o">,</span> <span class="n">menu</span><span class="o">);</span>
    <span class="k">return</span> <span class="kd">super</span><span class="o">.</span><span class="na">onCreateOptionsMenu</span><span class="o">(</span><span class="n">menu</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>


<p>which will install icons into <code>ActionBar</code>.</p>
<p>We will handle clicks on buttons with the method described below: </p>
<div class="codehilite"><pre><span></span><span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">onOptionsItemSelected</span><span class="o">(</span><span class="n">MenuItem</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">switch</span> <span class="o">(</span><span class="n">item</span><span class="o">.</span><span class="na">getItemId</span><span class="o">())</span> <span class="o">{</span>
        <span class="k">case</span> <span class="n">android</span><span class="o">.</span><span class="na">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">home</span><span class="o">:</span>
            <span class="n">finish</span><span class="o">();</span>
            <span class="k">break</span><span class="o">;</span>
        <span class="k">case</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">action_edit_item</span><span class="o">:</span>
            <span class="n">setEditMode</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
            <span class="k">break</span><span class="o">;</span>
        <span class="k">case</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">action_remove_item</span><span class="o">:</span>
            <span class="n">DocumentHelper</span><span class="o">.</span><span class="na">fetchAndRemoveDocument</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">document</span><span class="o">,</span> <span class="n">getDocumentInfo</span><span class="o">());</span>
            <span class="k">break</span><span class="o">;</span>
        <span class="k">case</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">action_prepare_item</span><span class="o">:</span>
            <span class="n">SendItemActivity</span><span class="o">.</span><span class="na">display</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">getDocumentInfo</span><span class="o">());</span>
            <span class="k">break</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="kd">super</span><span class="o">.</span><span class="na">onOptionsItemSelected</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>


<p>As a result we should get the screen shown in Figure 3.1</p>
<p><img alt="Device Details Screen" src="../img/Storehouse/3.1.png" /></p>
<p>Figure 3.1 — device details screen.</p>
<p>The following icons are located in the right upper side of the screen:</p>
<p><img alt="Edit device info" src="../img/Storehouse/3.1.1.png" /> Edit device info</p>
<p><img alt="Remove this device from the database" src="../img/Storehouse/3.1.2.png" /> Remove this device from the database</p>
<p><img alt="Switch to the device shipping info" src="../img/Storehouse/3.1.3.png" /> Switch to the device shipping info.</p>
<p>When a user presses the <img alt="Edit device info" src="../img/Storehouse/3.1.1.png" /> button, the sreen switches to the edit mode. To do so let's make these buttons visible: "Add colour", "Remove colour", "Increase store price", "Lower store price". Device details screen in the edit mode is shown in Figure 3.2. </p>
<p><img alt="Device details screen in the edit mode" src="../img/Storehouse/3.2.png" /></p>
<p>Figure 3.2 — Device details screen in the edit mode</p>
<p>Let's define the click event handler for the «Change Item» button which will execute the following code:</p>
<div class="codehilite"><pre><span></span><span class="kd">private</span> <span class="kt">void</span> <span class="nf">updateItemDocument</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">document</span><span class="o">.</span><span class="na">getDocumentById</span><span class="o">(</span><span class="n">getDocumentInfo</span><span class="o">().</span><span class="na">getId</span><span class="o">(),</span> <span class="k">new</span> <span class="n">CallbackGetDocumentById</span><span class="o">()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onDocumentFound</span><span class="o">(</span><span class="n">DocumentInfo</span> <span class="n">documentInfo</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">document</span><span class="o">.</span><span class="na">updateDocument</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="n">fields</span><span class="o">.</span><span class="na">getDeviceNameField</span><span class="o">(),</span> <span class="n">getStringFrom</span><span class="o">(</span><span class="n">etDeviceName</span><span class="o">))</span>
                    <span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="n">fields</span><span class="o">.</span><span class="na">getPlatformField</span><span class="o">(),</span> <span class="n">getStringFrom</span><span class="o">(</span><span class="n">etDevicePlatform</span><span class="o">))</span>
                    <span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="n">fields</span><span class="o">.</span><span class="na">getCameraInfoField</span><span class="o">(),</span> <span class="n">getStringFrom</span><span class="o">(</span><span class="n">etDeviceCameraInfo</span><span class="o">));</span>
            <span class="n">setColorsUpdateInfo</span><span class="o">();</span>
            <span class="n">document</span><span class="o">.</span><span class="na">updateDocument</span><span class="o">().</span><span class="na">inc</span><span class="o">(</span><span class="n">fields</span><span class="o">.</span><span class="na">getDevicePriceField</span><span class="o">(),</span> <span class="n">increaseCount</span><span class="o">);</span>
            <span class="n">document</span><span class="o">.</span><span class="na">saveDocument</span><span class="o">(</span><span class="k">new</span> <span class="n">CallbackDocumentSaved</span><span class="o">()</span> <span class="o">{</span>
                <span class="nd">@Override</span>
                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onDocumentSaved</span><span class="o">()</span> <span class="o">{</span>
                    <span class="n">setEditMode</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
                    <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">color</span> <span class="o">:</span> <span class="n">deviceColors</span><span class="o">.</span><span class="na">keySet</span><span class="o">())</span> <span class="o">{</span>
                        <span class="n">deviceColors</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">color</span><span class="o">,</span> <span class="n">ColorState</span><span class="o">.</span><span class="na">FROM_DB</span><span class="o">);</span>
                    <span class="o">}</span>
                    <span class="n">document</span><span class="o">.</span><span class="na">updateDocument</span><span class="o">().</span><span class="na">getUpdateInfo</span><span class="o">().</span><span class="na">clear</span><span class="o">();</span>
                <span class="o">}</span>
                <span class="nd">@Override</span>
                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onDocumentSaveFailed</span><span class="o">(</span><span class="n">String</span> <span class="n">errorCode</span><span class="o">,</span> <span class="n">String</span> <span class="n">errorMessage</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">showToast</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">error_update_item</span><span class="o">);</span>
                    <span class="n">setFields</span><span class="o">();</span>
                <span class="o">}</span>
            <span class="o">});</span>
        <span class="o">}</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onDocumentNotFound</span><span class="o">(</span><span class="n">String</span> <span class="n">errorCode</span><span class="o">,</span> <span class="n">String</span> <span class="n">errorMessage</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">showToast</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">error_update_item</span><span class="o">);</span>
            <span class="n">setFields</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">});</span>
<span class="o">}</span>
<span class="kd">private</span> <span class="kt">void</span> <span class="nf">setColorsUpdateInfo</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">color</span> <span class="o">:</span> <span class="n">deviceColors</span><span class="o">.</span><span class="na">keySet</span><span class="o">())</span> <span class="o">{</span>
        <span class="n">ColorState</span> <span class="n">colorState</span> <span class="o">=</span> <span class="n">deviceColors</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">color</span><span class="o">);</span>
        <span class="k">switch</span> <span class="o">(</span><span class="n">colorState</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">case</span> <span class="n">TO_REMOVE</span><span class="o">:</span>
                <span class="n">document</span><span class="o">.</span><span class="na">updateDocument</span><span class="o">().</span><span class="na">pull</span><span class="o">(</span><span class="n">fields</span><span class="o">.</span><span class="na">getColorsAvailableField</span><span class="o">(),</span> <span class="n">color</span><span class="o">);</span>
                <span class="k">break</span><span class="o">;</span>

            <span class="k">case</span> <span class="n">NEW</span><span class="o">:</span>
                <span class="n">document</span><span class="o">.</span><span class="na">updateDocument</span><span class="o">().</span><span class="na">push</span><span class="o">(</span><span class="n">fields</span><span class="o">.</span><span class="na">getColorsAvailableField</span><span class="o">(),</span> <span class="n">color</span><span class="o">);</span>
                <span class="k">break</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>To update device information we use the <code>updateDocument()</code> method of the <code>Document</code> class. In this case, the instance of the Document class wich we are updating should be linked to a real document in the database using the <code>getDocumentById</code> method. New values for the fileds below are set with the <code>set(field, value)</code> method of the <code>Update</code> class.</p>
<ul>
<li>Device Name ( deviceName field in the database)</li>
<li>Device OS (platform field in the database)</li>
<li>Camera Information (deviceCameraInfo)</li>
</ul>
<p>The  «device price» field (devicePrice in the database) is set with the <code>.inc(field, value)</code> mehod of the <code>Update</code> class. When we increase the price, we use positive prarameter values, and when we decrease it, then we use the negative ones.</p>
<p>The «avaliable colours» field (colorsAvailable in the database) is set with the <code>.push()</code> method (to add a colour) and the <code>.pull()</code> method (to remove a colour).</p>
<p>Let's look again at the <code>updateItemDocument(...)</code> method: to update the document fields we need to verify that such document exists  and to link our instance of the <code>Document</code> class to a document in the database. To do so we can use the <code>.getDocumentById(…)</code> method of the <code>Document</code> class.</p>
<p>After we have linked our document to the database one, we receive an object of the <code>Update</code> class using the <code>.updateDocument()</code> method. With that object we set a device name, OS and camera informaton using the <code>.set(…)</code> method.  We can add to the array  (with the <code>.push()</code> method) or remove from the array (with the <code>.pull</code> method) avaliable colours for this device and change its price in the price field (with the <code>.inc()</code> method). When all udates are done in our instance of the <code>Update</code> class, we save the document using the  <code>.saveDocument(…)</code> method of the <code>Document</code> class.</p>
<p>Since we received the document via linking it with another document from the database, (using the <code>.getDocumentById</code> method), the result of running <code>.saveDocument(…)</code> is an updated documet, not a new one.</p>
<p>Let's consider the <img alt="Remove this device from the database" src="../img/Storehouse/3.1.2.png" /> button - when pressed, the information is about a device is deleted from the database. To do so, we can add a click event handler which would trigger a method shown below:</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">fetchAndRemoveDocument</span><span class="o">(</span><span class="kd">final</span> <span class="n">Context</span> <span class="n">context</span><span class="o">,</span> <span class="kd">final</span> <span class="n">Document</span> <span class="n">document</span><span class="o">,</span> <span class="n">DocumentInfo</span> <span class="n">documentInfo</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">document</span><span class="o">.</span><span class="na">getDocumentById</span><span class="o">(</span><span class="n">documentInfo</span><span class="o">.</span><span class="na">getId</span><span class="o">(),</span> <span class="k">new</span> <span class="n">CallbackGetDocumentById</span><span class="o">()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onDocumentFound</span><span class="o">(</span><span class="n">DocumentInfo</span> <span class="n">documentInfo</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">removeDocument</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">document</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onDocumentNotFound</span><span class="o">(</span><span class="n">String</span> <span class="n">errorCode</span><span class="o">,</span> <span class="n">String</span> <span class="n">errorMessage</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">Helper</span><span class="o">.</span><span class="na">showToast</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">error_document_not_removed</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">});</span>
<span class="o">}</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">removeDocument</span><span class="o">(</span><span class="kd">final</span> <span class="n">Context</span> <span class="n">context</span><span class="o">,</span> <span class="n">Document</span> <span class="n">document</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">document</span><span class="o">.</span><span class="na">removeDocument</span><span class="o">(</span><span class="k">new</span> <span class="n">CallbackRemoveDocument</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onRemoveSucceed</span><span class="o">(</span><span class="n">ResponseRemove</span> <span class="n">responseRemove</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">context</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">document_removed</span><span class="o">),</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_SHORT</span><span class="o">).</span><span class="na">show</span><span class="o">();</span>
                <span class="o">((</span><span class="n">Activity</span><span class="o">)</span> <span class="n">context</span><span class="o">).</span><span class="na">finish</span><span class="o">();</span>
            <span class="o">}</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onRemoveFailed</span><span class="o">(</span><span class="n">String</span> <span class="n">errorCode</span><span class="o">,</span> <span class="n">String</span> <span class="n">errorMessage</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">context</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">error_document_not_removed</span><span class="o">),</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_SHORT</span><span class="o">).</span><span class="na">show</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">});</span>
<span class="o">}</span>
</pre></div>


<p>Let's consider this method in more detail. At first we use the <code>.getDocumentById(...)</code> method of the <code>Document</code> class to check whether a document exists and to link this document with our created instance of the <code>Document</code> class.</p>
<p>After we verified the document we can execute the <code>.removeDocument()</code> method of the <code>Document</code> class which deletes the document form the database.</p>
<p>The <img alt="Switch to the device shipping info" src="../img/Storehouse/3.1.3.png" /> button switches a screen to the screen with device shipping information. </p>
<h2 id="device-shipping-info-screen">Device Shipping Info Screen.</h2>
<p>Let's create a new activity called <code>SendItemActivity</code> and add the following xml code lines into its layout file:</p>
<div class="codehilite"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="nt">&lt;LinearLayout</span> <span class="na">xmlns:android=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span>
    <span class="na">xmlns:tools=</span><span class="s">&quot;http://schemas.android.com/tools&quot;</span>
    <span class="na">android:id=</span><span class="s">&quot;@+id/activity_send_item&quot;</span>
    <span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
    <span class="na">android:layout_height=</span><span class="s">&quot;match_parent&quot;</span>
    <span class="na">android:padding=</span><span class="s">&quot;16dp&quot;</span>
    <span class="na">android:orientation=</span><span class="s">&quot;vertical&quot;</span>
    <span class="na">tools:context=</span><span class="s">&quot;prof_itgroup.ru.storehouseapp.Activities.SendItemActivity&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;LinearLayout</span>
        <span class="na">android:id=</span><span class="s">&quot;@+id/llWaitingUsers&quot;</span>
        <span class="na">android:orientation=</span><span class="s">&quot;vertical&quot;</span>
        <span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
        <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;TextView</span>
            <span class="na">style=</span><span class="s">&quot;@style/label_style&quot;</span>
            <span class="na">android:textColor=</span><span class="s">&quot;@android:color/black&quot;</span>
            <span class="na">android:text=</span><span class="s">&quot;@string/action_waiting_list&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;TextView</span>
            <span class="na">android:id=</span><span class="s">&quot;@+id/tvWaitingUsers&quot;</span>
            <span class="na">style=</span><span class="s">&quot;@style/label_style&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;TextView</span>
            <span class="na">android:id=</span><span class="s">&quot;@+id/tvLastChangeLabel&quot;</span>
            <span class="na">android:textColor=</span><span class="s">&quot;@android:color/black&quot;</span>
            <span class="na">android:layout_marginTop=</span><span class="s">&quot;8dp&quot;</span>
            <span class="na">style=</span><span class="s">&quot;@style/label_style&quot;</span>
            <span class="na">android:text=</span><span class="s">&quot;@string/last_change&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;TextView</span>
            <span class="na">android:id=</span><span class="s">&quot;@+id/tvLastChange&quot;</span>
            <span class="na">style=</span><span class="s">&quot;@style/label_style&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;LinearLayout</span>
            <span class="na">android:id=</span><span class="s">&quot;@+id/llInfoContainer&quot;</span>
            <span class="na">android:orientation=</span><span class="s">&quot;vertical&quot;</span>
            <span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
            <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;RelativeLayout</span>
                <span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
                <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;TextView</span>
                    <span class="na">android:layout_marginTop=</span><span class="s">&quot;8dp&quot;</span>
                    <span class="na">android:textColor=</span><span class="s">&quot;@android:color/black&quot;</span>
                    <span class="na">android:text=</span><span class="s">&quot;@string/item_info&quot;</span>
                    <span class="na">style=</span><span class="s">&quot;@style/label_style&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;TextView</span>
                    <span class="na">android:id=</span><span class="s">&quot;@+id/tvEdit&quot;</span>
                    <span class="na">android:layout_alignParentRight=</span><span class="s">&quot;true&quot;</span>
                    <span class="na">android:layout_marginTop=</span><span class="s">&quot;10dp&quot;</span>
                    <span class="na">android:text=</span><span class="s">&quot;@string/editInfo&quot;</span>
                    <span class="na">android:textColor=</span><span class="s">&quot;@color/colorPrimary&quot;</span>
                    <span class="na">android:layout_width=</span><span class="s">&quot;wrap_content&quot;</span>
                    <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;/RelativeLayout&gt;</span>
            <span class="nt">&lt;ScrollView</span>
                <span class="na">android:layout_marginTop=</span><span class="s">&quot;8dp&quot;</span>
                <span class="na">android:layout_width=</span><span class="s">&quot;wrap_content&quot;</span>
                <span class="na">android:layout_height=</span><span class="s">&quot;180dp&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;EditText</span>
                    <span class="na">android:id=</span><span class="s">&quot;@+id/etItemInfo&quot;</span>
                    <span class="na">android:enabled=</span><span class="s">&quot;false&quot;</span>
                    <span class="na">android:layout_width=</span><span class="s">&quot;wrap_content&quot;</span>
                    <span class="na">android:layout_height=</span><span class="s">&quot;180dp&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;/ScrollView&gt;</span>
        <span class="nt">&lt;/LinearLayout&gt;</span>
    <span class="nt">&lt;/LinearLayout&gt;</span>
    <span class="nt">&lt;LinearLayout</span>
        <span class="na">android:orientation=</span><span class="s">&quot;vertical&quot;</span>
        <span class="na">android:layout_gravity=</span><span class="s">&quot;center_horizontal&quot;</span>
        <span class="na">android:layout_width=</span><span class="s">&quot;wrap_content&quot;</span>
        <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;Button</span>
            <span class="na">android:layout_marginTop=</span><span class="s">&quot;8dp&quot;</span>
            <span class="na">android:layout_gravity=</span><span class="s">&quot;center_horizontal&quot;</span>
            <span class="na">android:id=</span><span class="s">&quot;@+id/btnAppUserInList&quot;</span>
            <span class="na">android:text=</span><span class="s">&quot;@string/addUserInList&quot;</span>
            <span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
            <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;Button</span>
            <span class="na">android:layout_marginTop=</span><span class="s">&quot;8dp&quot;</span>
            <span class="na">android:layout_gravity=</span><span class="s">&quot;center_horizontal&quot;</span>
            <span class="na">android:id=</span><span class="s">&quot;@+id/btnSendToUser&quot;</span>
            <span class="na">android:text=</span><span class="s">&quot;@string/sendToUser&quot;</span>
            <span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
            <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/LinearLayout&gt;</span>
<span class="nt">&lt;/LinearLayout&gt;</span>
</pre></div>


<p>The created screen is shown in Figure 4.1</p>
<p><img alt="Device Shipping Info Screen" src="../img/Storehouse/4.1.png" /></p>
<p>Figure 4.1 — Device Shipping Info Screen</p>
<p>When the «ADD BUYER» button is pressed, a dialog screen appears where one can enter information about a buyer. Afterwards, the following code is run:</p>
<div class="codehilite"><pre><span></span><span class="kd">private</span> <span class="kt">void</span> <span class="nf">addBuyerAndRefreshWaitingList</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">buyerInfo</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span><span class="o">(!</span><span class="n">buyerInfo</span><span class="o">.</span><span class="na">trim</span><span class="o">().</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
        <span class="n">document</span><span class="o">.</span><span class="na">getDocumentById</span><span class="o">(</span><span class="n">getDocumentInfo</span><span class="o">().</span><span class="na">getId</span><span class="o">(),</span> <span class="k">new</span> <span class="n">CallbackGetDocumentById</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onDocumentFound</span><span class="o">(</span><span class="n">DocumentInfo</span> <span class="n">documentInfo</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">document</span><span class="o">.</span><span class="na">updateDocument</span><span class="o">().</span><span class="na">push</span><span class="o">(</span><span class="n">fields</span><span class="o">.</span><span class="na">getBuyersField</span><span class="o">(),</span> <span class="n">buyerInfo</span><span class="o">);</span>
                <span class="n">document</span><span class="o">.</span><span class="na">saveDocument</span><span class="o">(</span><span class="k">new</span> <span class="n">CallbackDocumentSaved</span><span class="o">()</span> <span class="o">{</span>
                    <span class="nd">@Override</span>
                    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onDocumentSaved</span><span class="o">()</span> <span class="o">{</span>
                        <span class="n">document</span><span class="o">.</span><span class="na">updateDocument</span><span class="o">().</span><span class="na">getUpdateInfo</span><span class="o">().</span><span class="na">clear</span><span class="o">();</span>
                        <span class="n">refreshWaitingList</span><span class="o">();</span>
                        <span class="n">showToast</span><span class="o">(</span><span class="n">getBaseContext</span><span class="o">(),</span> <span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">add_waiting_buyer</span><span class="o">);</span>
                    <span class="o">}</span>
                    <span class="nd">@Override</span>
                    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onDocumentSaveFailed</span><span class="o">(</span><span class="n">String</span> <span class="n">errorCode</span><span class="o">,</span> <span class="n">String</span> <span class="n">errorMessage</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">showToast</span><span class="o">(</span><span class="n">getBaseContext</span><span class="o">(),</span> <span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">error</span><span class="o">);</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onDocumentNotFound</span><span class="o">(</span><span class="n">String</span> <span class="n">errorCode</span><span class="o">,</span> <span class="n">String</span> <span class="n">errorMessage</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">showToast</span><span class="o">(</span><span class="n">getBaseContext</span><span class="o">(),</span> <span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">error</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">});</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>Let's consider the method in more details. At first, we use verify that the buyer's name field is not empty. In case a user did provide with the buyer's information, the instance of the <code>Document</code> class is linked to the document in the database. Afterwards, the document data is updated and the entered information about the buyer is added to the end of the buyers array with the <code>.push()</code> method of the <code>Update</code> class. This is how a queue is formed which consists of buyers waiting for thier goods shipment.  </p>
<p>When the «SHIP TO BUYER» button is pressed, the first client in the waiting clients queue array gets deleted. Alongside this, the latest shipment time should be recorded and the employees should be notified about it (e.g. movers, delivery drivers, accountants).<br />
To do this, we can add a click event handler which executes the following method:</p>
<div class="codehilite"><pre><span></span><span class="nd">@OnClick</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">btnSendToUser</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">onSendToUserButtonClicked</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">document</span><span class="o">.</span><span class="na">getDocumentById</span><span class="o">(</span><span class="n">getDocumentInfo</span><span class="o">().</span><span class="na">getId</span><span class="o">(),</span> <span class="k">new</span> <span class="n">CallbackGetDocumentById</span><span class="o">()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onDocumentFound</span><span class="o">(</span><span class="kd">final</span> <span class="n">DocumentInfo</span> <span class="n">documentInfo</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">document</span><span class="o">.</span><span class="na">updateDocument</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">popFirst</span><span class="o">(</span><span class="n">fields</span><span class="o">.</span><span class="na">getBuyersField</span><span class="o">())</span>
                    <span class="o">.</span><span class="na">setCurrentDate</span><span class="o">(</span><span class="n">fields</span><span class="o">.</span><span class="na">getLastSendField</span><span class="o">());</span>

         <span class="n">document</span><span class="o">.</span><span class="na">saveDocument</span><span class="o">(</span><span class="k">new</span> <span class="n">CallbackDocumentSaved</span><span class="o">()</span> <span class="o">{</span>
                <span class="nd">@Override</span>
                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onDocumentSaved</span><span class="o">()</span> <span class="o">{</span>
                    <span class="n">document</span><span class="o">.</span><span class="na">updateDocument</span><span class="o">().</span><span class="na">getUpdateInfo</span><span class="o">().</span><span class="na">clear</span><span class="o">();</span>
                    <span class="k">new</span> <span class="n">ItemNotificator</span><span class="o">(</span><span class="n">getBaseContext</span><span class="o">(),</span> <span class="n">documentInfo</span><span class="o">.</span><span class="na">getId</span><span class="o">(),</span> <span class="n">fields</span><span class="o">.</span><span class="na">getDeviceName</span><span class="o">()).</span><span class="na">notifyPersonalAboutItemSend</span><span class="o">();</span>
                    <span class="k">new</span> <span class="n">BalanceNotificator</span><span class="o">(</span><span class="n">getBaseContext</span><span class="o">()).</span><span class="na">refreshCompanyBalance</span><span class="o">();</span>
                    <span class="n">etItemInfo</span><span class="o">.</span><span class="na">setVisibility</span><span class="o">(</span><span class="n">View</span><span class="o">.</span><span class="na">VISIBLE</span><span class="o">);</span>
                    <span class="n">etItemInfo</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">fields</span><span class="o">.</span><span class="na">getLastSendTime</span><span class="o">());</span>
                    <span class="n">refreshWaitingList</span><span class="o">();</span>
                <span class="o">}</span>

               <span class="nd">@Override</span>
                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onDocumentSaveFailed</span><span class="o">(</span><span class="n">String</span> <span class="n">errorCode</span><span class="o">,</span> <span class="n">String</span> <span class="n">errorMessage</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">showToast</span><span class="o">(</span><span class="n">getBaseContext</span><span class="o">(),</span> <span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">error</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">});</span>
 <span class="o">}</span>
</pre></div>


<p>In this method, we can see a <code>Document</code> class instance being linked to a document from the database with the <code>.getDocumentById()</code> method of the <code>Document</code> class. We use its <code>.popFirst</code> method which deletes the first element of an array (imitating attending to the first person in a queue). Furthermore, the time of the last shipment is recorded in the field called "Last shipment occurred..." (lastSend in the database) using the <code>.setCurrentDate(…)</code> method of the <code>Update</code> class.</p>
<p>The screen also contains comments about the shipment, which are stored in the document file (sendInfo field of the File type). By default, this file does not exist and the text screen shows "No comments about the device...". A user can press the Edit button, change the shipment comment and press the Save button. It will execute the following method:  </p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">uploadFile</span><span class="o">(</span><span class="kd">final</span> <span class="n">Context</span> <span class="n">context</span><span class="o">,</span> <span class="n">Document</span> <span class="n">document</span><span class="o">,</span> <span class="n">String</span> <span class="n">content</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">document</span><span class="o">.</span><span class="na">uploadFile</span><span class="o">(</span><span class="k">new</span> <span class="n">DocumentFields</span><span class="o">(</span><span class="n">context</span><span class="o">).</span><span class="na">getSendInfoField</span><span class="o">(),</span> <span class="n">FILE_NAME</span><span class="o">,</span> <span class="n">encode</span><span class="o">(</span><span class="n">content</span><span class="o">.</span><span class="na">getBytes</span><span class="o">()),</span>
        <span class="k">new</span> <span class="n">CallbackUploadFile</span><span class="o">()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onDocumentUploaded</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">//file loaded</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onDocumentUploadFailed</span><span class="o">(</span><span class="n">String</span> <span class="n">errorCode</span><span class="o">,</span> <span class="n">String</span> <span class="n">errorMessage</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">Helper</span><span class="o">.</span><span class="na">showToast</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">error</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">});</span>
<span class="o">}</span>
</pre></div>


<p>This method uploads the file into a document field (File type) in the database. The document should be linked with the <code>getDocumentById(…)</code> method. A similar routine happens when a document is deleted from the database. </p>
<p>Waiting users' information and shipment comments are retrieved from the server using the method shown below:</p>
<div class="codehilite"><pre><span></span><span class="kd">private</span> <span class="kt">void</span> <span class="nf">refreshWaitingList</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">document</span><span class="o">.</span><span class="na">getDocumentById</span><span class="o">(</span><span class="n">getDocumentInfo</span><span class="o">().</span><span class="na">getId</span><span class="o">(),</span> <span class="k">new</span> <span class="n">CallbackGetDocumentById</span><span class="o">()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onDocumentFound</span><span class="o">(</span><span class="n">DocumentInfo</span> <span class="n">documentInfo</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">fields</span><span class="o">.</span><span class="na">setDocumentInfo</span><span class="o">(</span><span class="n">documentInfo</span><span class="o">);</span>
            <span class="n">tvWaitingUsers</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">fields</span><span class="o">.</span><span class="na">getBuyers</span><span class="o">());</span>
            <span class="n">tvLastChange</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">fields</span><span class="o">.</span><span class="na">getLastSendTime</span><span class="o">());</span>
            <span class="n">llWaitingUsers</span><span class="o">.</span><span class="na">setVisibility</span><span class="o">(</span><span class="n">fields</span><span class="o">.</span><span class="na">getBuyers</span><span class="o">().</span><span class="na">isEmpty</span><span class="o">()</span> <span class="o">?</span> <span class="n">View</span><span class="o">.</span><span class="na">GONE</span> <span class="o">:</span> <span class="n">View</span><span class="o">.</span><span class="na">VISIBLE</span><span class="o">);</span>
            <span class="n">tvLastChangeLabel</span><span class="o">.</span><span class="na">setVisibility</span><span class="o">(</span><span class="n">fields</span><span class="o">.</span><span class="na">getLastSendTime</span><span class="o">().</span><span class="na">isEmpty</span><span class="o">()</span> <span class="o">?</span> <span class="n">View</span><span class="o">.</span><span class="na">GONE</span> <span class="o">:</span> <span class="n">View</span><span class="o">.</span><span class="na">VISIBLE</span><span class="o">);</span>
            <span class="n">tvLastChange</span><span class="o">.</span><span class="na">setVisibility</span><span class="o">(</span><span class="n">fields</span><span class="o">.</span><span class="na">getLastSendTime</span><span class="o">().</span><span class="na">isEmpty</span><span class="o">()</span> <span class="o">?</span> <span class="n">View</span><span class="o">.</span><span class="na">GONE</span> <span class="o">:</span> <span class="n">View</span><span class="o">.</span><span class="na">VISIBLE</span><span class="o">);</span>
            <span class="n">btnSendToUser</span><span class="o">.</span><span class="na">setVisibility</span><span class="o">(</span><span class="n">fields</span><span class="o">.</span><span class="na">getBuyers</span><span class="o">().</span><span class="na">isEmpty</span><span class="o">()</span> <span class="o">?</span> <span class="n">View</span><span class="o">.</span><span class="na">GONE</span> <span class="o">:</span> <span class="n">View</span><span class="o">.</span><span class="na">VISIBLE</span><span class="o">);</span>
            <span class="n">document</span><span class="o">.</span><span class="na">getFileContent</span><span class="o">(</span><span class="n">fields</span><span class="o">.</span><span class="na">getSendInfoField</span><span class="o">(),</span> <span class="n">FileHelper</span><span class="o">.</span><span class="na">FILE_NAME</span><span class="o">,</span> <span class="k">new</span> <span class="n">CallbackGetFile</span><span class="o">()</span> <span class="o">{</span>
                <span class="nd">@Override</span>
                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onSucceed</span><span class="o">(</span><span class="n">String</span> <span class="n">fileContent</span><span class="o">)</span> <span class="o">{</span>
                    <span class="k">if</span><span class="o">(</span><span class="n">fileContent</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">fileContent</span><span class="o">.</span><span class="na">trim</span><span class="o">().</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
                        <span class="n">etItemInfo</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">fileContent</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                        <span class="n">etItemInfo</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">no_info</span><span class="o">);</span>
                    <span class="o">}</span>
                <span class="o">}</span>
                <span class="nd">@Override</span>
                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onFailed</span><span class="o">(</span><span class="n">String</span> <span class="n">errorCode</span><span class="o">,</span> <span class="n">String</span> <span class="n">errorMessage</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">showToast</span><span class="o">(</span><span class="n">getBaseContext</span><span class="o">(),</span> <span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">error</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">});</span>
        <span class="o">}</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onDocumentNotFound</span><span class="o">(</span><span class="n">String</span> <span class="n">errorCode</span><span class="o">,</span> <span class="n">String</span> <span class="n">errorMessage</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">tvWaitingUsers</span><span class="o">.</span><span class="na">setVisibility</span><span class="o">(</span><span class="n">View</span><span class="o">.</span><span class="na">GONE</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">});</span>
<span class="o">}</span>
</pre></div>


<p>In this method, we can see a <code>Document</code> class instance being linked to a document from the database, which leads to the following fields updating on the screen:
1. users waiting queue list 
2. time of the last shipment
3. setting visibility of different elements depending on the content </p>
<p>Using the <code>getFileContent</code> method of the <code>Document</code> class we can receive the file contents as a line (with formating). The line then is set in the comment field. </p>
<p>Lets also create the <code>ItemNotificator</code> class and add the <code>notifyPersonalAboutItemSend()</code> method to it. The method will be called when a device is shipped to a user. Its code is shown below:</p>
<p>```public void notifyPersonalAboutItemSend() {
    sendPushToLoaderPerson();
    sendEmailInAccountingDepartment();
    sendSmsToDeliveryPerson();
}
<div class="codehilite"><pre><span></span>This method is notifying the employees stating that the device is ready for shipment. It does so by:

- sending a push notification to a mover with the following:

```Java
private void sendPushToLoaderPerson() {
    Query query = new Query(&quot;roles&quot;);
    query.equalTo(&quot;name&quot;, &quot;loaderPerson&quot;);
    query.equalTo(&quot;isFree&quot;, true);
    query.setLimit(1);

    MessagePush messagePush = new MessagePush(context.getString(R.string.you_should_take) + getItemInfo() + context.getString(R.string.and_prepare), null);
    message.sendPush(messagePush, query, new CallbackSendPush() {
        @Override
        public void onPushSended() {
            Helper.showToast(context, R.string.push_sended);
        }
        @Override
        public void onPushSendFailed(String errorCode, String errorMessage) {
            Helper.showToast(context, R.string.cant_send_push);
        }
    });
}
</pre></div>
</p>
<ul>
<li>sending a text (sms) to a delivery person: </li>
</ul>
<div class="codehilite"><pre><span></span><span class="kd">private</span> <span class="kt">void</span> <span class="nf">sendSmsToDeliveryPerson</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Query</span> <span class="n">query</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Query</span><span class="o">(</span><span class="s">&quot;roles&quot;</span><span class="o">);</span>
    <span class="n">query</span><span class="o">.</span><span class="na">equalTo</span><span class="o">(</span><span class="s">&quot;name&quot;</span><span class="o">,</span> <span class="s">&quot;deliveryPerson&quot;</span><span class="o">);</span>
    <span class="n">query</span><span class="o">.</span><span class="na">equalTo</span><span class="o">(</span><span class="s">&quot;isFree&quot;</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
    <span class="n">query</span><span class="o">.</span><span class="na">setLimit</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>

    <span class="n">MessageSms</span> <span class="n">messageSms</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MessageSms</span><span class="o">(</span><span class="n">context</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">take_item</span><span class="o">)</span> <span class="o">+</span> <span class="n">getItemInfo</span><span class="o">());</span>
    <span class="n">message</span><span class="o">.</span><span class="na">sendSms</span><span class="o">(</span><span class="n">messageSms</span><span class="o">,</span> <span class="n">query</span><span class="o">,</span> <span class="k">new</span> <span class="n">CallbackSendSms</span><span class="o">()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onSmsSended</span><span class="o">()</span> <span class="o">{</span>
            <span class="n">Helper</span><span class="o">.</span><span class="na">showToast</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">sms_was_sended</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onSmsSendFailed</span><span class="o">(</span><span class="n">String</span> <span class="n">errorCode</span><span class="o">,</span> <span class="n">String</span> <span class="n">errorMessage</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">Helper</span><span class="o">.</span><span class="na">showToast</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">cant_send_sms</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">});</span>
<span class="o">}</span>
</pre></div>


<ul>
<li>sending an email to the accountants' office:</li>
</ul>
<div class="codehilite"><pre><span></span><span class="kd">private</span> <span class="kt">void</span> <span class="nf">sendEmailInAccountingDepartment</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Query</span> <span class="n">query</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Query</span><span class="o">(</span><span class="s">&quot;roles&quot;</span><span class="o">);</span>
    <span class="n">query</span><span class="o">.</span><span class="na">equalTo</span><span class="o">(</span><span class="s">&quot;name&quot;</span><span class="o">,</span> <span class="s">&quot;accountantPerson&quot;</span><span class="o">);</span>

    <span class="n">MessageEmail</span> <span class="n">messageEmail</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MessageEmail</span><span class="o">(</span><span class="n">context</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">from</span><span class="o">),</span> <span class="n">context</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">device</span><span class="o">)</span> <span class="o">+</span> <span class="n">getItemInfo</span><span class="o">()</span> <span class="o">,</span> <span class="n">context</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">device</span><span class="o">)</span> <span class="o">+</span> <span class="n">getItemInfo</span><span class="o">()</span> <span class="o">+</span> <span class="n">context</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">sold</span><span class="o">));</span>
    <span class="n">message</span><span class="o">.</span><span class="na">sendEmail</span><span class="o">(</span><span class="n">messageEmail</span><span class="o">,</span> <span class="n">query</span><span class="o">,</span> <span class="k">new</span> <span class="n">CallbackSendEmail</span><span class="o">()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onEmailSend</span><span class="o">()</span> <span class="o">{</span>
            <span class="n">Helper</span><span class="o">.</span><span class="na">showToast</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">email_was_sended</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onEmailSendFailed</span><span class="o">(</span><span class="n">String</span> <span class="n">errorCode</span><span class="o">,</span> <span class="n">String</span> <span class="n">errorMessage</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">Helper</span><span class="o">.</span><span class="na">showToast</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">cant_send_email</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">});</span>
<span class="o">}</span>
</pre></div>


<p>Let's consider how these methods work in detail:</p>
<ol>
<li>In the <code>sendEmailInAccountingDepartment</code> method the following happens: the «accountantPerson» role is chosen from the roles collection and all users with this role are sent emails using the <code>.sendEmail()</code> method of the <code>Message</code> class.</li>
<li>In the <code>sendSmdToDeliveryPerson</code> method the following happens: one unoccupied employee (<code>setLimit(1)</code> and <code>sFree == true</code> conditions) with the «deliveryPerson» role is chosen from the roles collection and is sent a text (sms) using the <code>.sendSms</code> method of the <code>Message</code> class.</li>
<li>In the <code>sendSmdToLoaderPerson</code> method the following happens: one unoccupied employee (<code>setLimit(1)</code> and <code>sFree == true</code> conditions) with the «loaderPerson» role is chosen from the roles collection and is sent a push notification using the <code>.sendPush</code> method of the <code>Message</code> class.</li>
</ol>
<p>After the "SHIP TO BUYER" button is pushed the <code>refreshCompanyBalance()</code> method of the <code>BalanceNotivicator</code> class is executed.</p>
<p>The <code>resreshCompanyBalance()</code> method listing:</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kt">void</span> <span class="nf">refreshCompanyBalance</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Script</span> <span class="n">script</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Script</span><span class="o">();</span>
    <span class="n">script</span><span class="o">.</span><span class="na">runScript</span><span class="o">(</span><span class="s">&quot; 5800ad9342d52f1ba275fbcd&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">CallbackSendScript</span><span class="o">()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onScriptSended</span><span class="o">()</span> <span class="o">{</span>
            <span class="n">Helper</span><span class="o">.</span><span class="na">showToast</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">balance_refreshed</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onScriptSendFailed</span><span class="o">(</span><span class="n">String</span> <span class="n">errorCode</span><span class="o">,</span> <span class="n">String</span> <span class="n">errorMessage</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">Helper</span><span class="o">.</span><span class="na">showToast</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">can_refresh_balance</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">});</span>
<span class="o">}</span>
</pre></div>


<p>In this listing, the server-side code with 5800ad9342d52f1ba275fbcd ID is called using the <code>runScript(...)</code> method of the <code>Script</code> class. It recounts the goods in our storehouse and adjusts the storage costs, the balance and other characteristics.  </p>
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../ScorocodeScript/" title="ScorocodeScript" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                ScorocodeScript
              </span>
            </div>
          </a>
        
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
      <a href="https://github.com/scorocode" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://www.facebook.com/scorocode" class="md-footer-social__link fa fa-facebook"></a>
    
      <a href="https://www.linkedin.com/company/prof-it-group" class="md-footer-social__link fa fa-linkedin"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application-2afe21e0b2.js"></script>
      <script>var config={url:{base:"../.."}},app=new Application(config);app.initialize()</script>
      
    
    
      
    
  </body>
</html>