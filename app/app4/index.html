
<!DOCTYPE html>
<html class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="shortcut icon" href="../../assets/images/favicon.ico">
      
      <meta name="generator" content="mkdocs+mkdocs-material#1.0.3">
    
    
      
        <title>Triggers - Scorocode documentation</title>
      
    
    
      <script src="../../assets/javascripts/modernizr-facb31f4a3.js"></script>
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application-f3ab63f78a.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-02ce7adcc2.palette.css">
      
      
    
    
  </head>
  
  
  
  
    <body data-md-color-primary="blue" data-md-color-accent="light-blue">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="Scorocode documentation" class=" md-logo  md-header-nav__button">
          
            <img src="../../logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
                <span class="md-header-nav__parent">
                  Scorocode
                </span>
              
            
            Triggers
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search">
  <div class="md-search__overlay"></div>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" accesskey="s" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false">
      <label class="md-icon md-search__icon" for="search"></label>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result"></div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            
          </div>
      </div>
    </div>
  </nav>
</header>
    
    <div class="md-container">
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <i class=" md-logo  md-nav__button">
      
        <img src="../../logo.png">
      
    </i>
    Scorocode documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1" checked>
    
    <label class="md-nav__link" for="nav-1">
      Scorocode
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-1">
        Scorocode
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../.." title="General info" class="md-nav__link">
        General info
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../main/main1/" title="Get started" class="md-nav__link">
        Get started
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../main/main2/" title="My account" class="md-nav__link">
        My account
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../app/" title="Working with application" class="md-nav__link">
        Working with application
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../app1/" title="Application analytics" class="md-nav__link">
        Application analytics
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../app2/" title="Application data" class="md-nav__link">
        Application data
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../app3/" title="Indexes" class="md-nav__link">
        Indexes
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Triggers
      </label>
    
    <a href="./" title="Triggers" class="md-nav__link md-nav__link--active">
      Triggers
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pool-object" title="pool Object" class="md-nav__link">
    pool Object
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#before-operation-insert" title="Before operation insert:" class="md-nav__link">
    Before operation insert:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#after-operation-insert" title="After operation insert:" class="md-nav__link">
    After operation insert:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#before-operation-remove" title="Before operation remove:" class="md-nav__link">
    Before operation remove:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#after-operation-remove" title="After operation remove:" class="md-nav__link">
    After operation remove:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#before-operation-update" title="Before operation update:" class="md-nav__link">
    Before operation update:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#after-operation-update" title="After operation update:" class="md-nav__link">
    After operation update:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#before-operation-updatebyid" title="Before operation updatebyid:" class="md-nav__link">
    Before operation updatebyid:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#after-operation-updatebyid" title="After operation updatebyid:" class="md-nav__link">
    After operation updatebyid:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#datamanager-object" title="DataManager Object" class="md-nav__link">
    DataManager Object
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#datamanagerinsertdata-object" title="DataManager.Insert(data Object)" class="md-nav__link">
    DataManager.Insert(data Object)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#datamanagerremovedata-object" title="DataManager.Remove(data Object)" class="md-nav__link">
    DataManager.Remove(data Object)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#datamanagerupdatedata-object" title="DataManager.Update(data Object)" class="md-nav__link">
    DataManager.Update(data Object)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#datamanagerupdatebyiddata-object" title="DataManager.UpdateById(data Object)" class="md-nav__link">
    DataManager.UpdateById(data Object)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#datamanagerfinddata-object" title="DataManager.Find(data Object)" class="md-nav__link">
    DataManager.Find(data Object)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#datamanagercountdata-object" title="DataManager.Count(data Object)" class="md-nav__link">
    DataManager.Count(data Object)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#datamanagerrunscriptdata-object" title="DataManager.RunScript(data Object)" class="md-nav__link">
    DataManager.RunScript(data Object)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#trigger-examples" title="Trigger examples" class="md-nav__link">
    Trigger examples
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setting-a-field-value-as-mandatory" title="Setting a field value as mandatory." class="md-nav__link">
    Setting a field value as mandatory.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-a-default-value" title="Setting a default value." class="md-nav__link">
    Setting a default value.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-a-document-related-in-a-different-collection" title="Creating a document related in a different collection." class="md-nav__link">
    Creating a document related in a different collection.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deleting-related-documents-from-a-different-collection" title="Deleting related documents from a different collection." class="md-nav__link">
    Deleting related documents from a different collection.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-a-server-side-script-from-a-trigger" title="Running a server-side script from a trigger." class="md-nav__link">
    Running a server-side script from a trigger.
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../app5/" title="Serverside code" class="md-nav__link">
        Serverside code
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../bots/" title="Telegram bots" class="md-nav__link">
        Telegram bots
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../app6/" title="Application settings" class="md-nav__link">
        Application settings
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      HTTP API
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-2">
        HTTP API
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../../httpapi/appapi/" title="Working with application" class="md-nav__link">
        Working with application
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../httpapi/httpapi1/" title="Users" class="md-nav__link">
        Users
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../httpapi/httpapi2/" title="Data" class="md-nav__link">
        Data
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../httpapi/httpapi3/" title="Files" class="md-nav__link">
        Files
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../httpapi/httpapi4/" title="Messages" class="md-nav__link">
        Messages
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../httpapi/httpapi5/" title="Scripts" class="md-nav__link">
        Scripts
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../httpapi/httpapi6/" title="Stats" class="md-nav__link">
        Stats
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      JavaScript SDK
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-3">
        JavaScript SDK
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../../JS/javascript/" title="JavaScript SDK" class="md-nav__link">
        JavaScript SDK
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../JS/Scorocode/" title="Scorocode" class="md-nav__link">
        Scorocode
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../JS/Scorocode.Object/" title="Scorocode.Object" class="md-nav__link">
        Scorocode.Object
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../JS/Scorocode.Query/" title="Scorocode.Query" class="md-nav__link">
        Scorocode.Query
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../JS/Scorocode.UpdateOps/" title="Scorocode.UpdateOps" class="md-nav__link">
        Scorocode.UpdateOps
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../JS/Scorocode.User/" title="Scorocode.User" class="md-nav__link">
        Scorocode.User
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../JS/Scorocode.Messenger/" title="Scorocode.Messenger" class="md-nav__link">
        Scorocode.Messenger
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../JS/Scorocode.CloudCode/" title="Scorocode.CloudCode" class="md-nav__link">
        Scorocode.CloudCode
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../JS/Scorocode.Bot/" title="Scorocode.Bot" class="md-nav__link">
        Scorocode.Bot
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../JS/Scorocode.Websocket/" title="Scorocode.WebSocket" class="md-nav__link">
        Scorocode.WebSocket
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../JS/Scorocode.System/" title="Scorocode.System" class="md-nav__link">
        Scorocode.System
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      SWIFT SDK (iOs, Mac OS)
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-4">
        SWIFT SDK (iOs, Mac OS)
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../../SWIFT/SWIFT/" title="SWIFT SDK" class="md-nav__link">
        SWIFT SDK
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../SWIFT/SC/" title="SC" class="md-nav__link">
        SC
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../SWIFT/SCValue/" title="SCValue" class="md-nav__link">
        SCValue
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../SWIFT/SCObject/" title="SCObject" class="md-nav__link">
        SCObject
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../SWIFT/SCQuery/" title="SCQuery" class="md-nav__link">
        SCQuery
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../SWIFT/SCUpdate/" title="SCUpdate" class="md-nav__link">
        SCUpdate
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../SWIFT/SCUser/" title="SCUser" class="md-nav__link">
        SCUser
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../SWIFT/SCMessage/" title="SCMessage" class="md-nav__link">
        SCMessage
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../SWIFT/SCScript/" title="SCScript" class="md-nav__link">
        SCScript
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../SWIFT/WebSocket/" title="WebSocket" class="md-nav__link">
        WebSocket
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Java SDK (Android)
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-5">
        Java SDK (Android)
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../../Java/Java/" title="Java SDK" class="md-nav__link">
        Java SDK
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../Java/ScorocodeSDK/" title="ScorocodeSDK" class="md-nav__link">
        ScorocodeSDK
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../Java/Document/" title="Document" class="md-nav__link">
        Document
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../Java/Update/" title="Update" class="md-nav__link">
        Update
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../Java/User/" title="User" class="md-nav__link">
        User
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../Java/Query/" title="Query" class="md-nav__link">
        Query
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../Java/Script/" title="Script" class="md-nav__link">
        Script
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../Java/Message/" title="Message" class="md-nav__link">
        Message
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../Java/WebSocket/" title="WebSocket" class="md-nav__link">
        WebSocket
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../Java/ApplicationInfo/" title="ApplicationInfo" class="md-nav__link">
        ApplicationInfo
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../Java/Bot/" title="Bot" class="md-nav__link">
        Bot
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../Java/Collections/" title="Collections" class="md-nav__link">
        Collections
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../Java/Folders/" title="Folders" class="md-nav__link">
        Folders
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../Java/ScorocodeScript/" title="ScorocodeScript" class="md-nav__link">
        ScorocodeScript
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Applications examples
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-6">
        Applications examples
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../../Java/Storehouse/" title="Storehouse (Android)" class="md-nav__link">
        Storehouse (Android)
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pool-object" title="pool Object" class="md-nav__link">
    pool Object
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#before-operation-insert" title="Before operation insert:" class="md-nav__link">
    Before operation insert:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#after-operation-insert" title="After operation insert:" class="md-nav__link">
    After operation insert:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#before-operation-remove" title="Before operation remove:" class="md-nav__link">
    Before operation remove:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#after-operation-remove" title="After operation remove:" class="md-nav__link">
    After operation remove:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#before-operation-update" title="Before operation update:" class="md-nav__link">
    Before operation update:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#after-operation-update" title="After operation update:" class="md-nav__link">
    After operation update:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#before-operation-updatebyid" title="Before operation updatebyid:" class="md-nav__link">
    Before operation updatebyid:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#after-operation-updatebyid" title="After operation updatebyid:" class="md-nav__link">
    After operation updatebyid:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#datamanager-object" title="DataManager Object" class="md-nav__link">
    DataManager Object
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#datamanagerinsertdata-object" title="DataManager.Insert(data Object)" class="md-nav__link">
    DataManager.Insert(data Object)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#datamanagerremovedata-object" title="DataManager.Remove(data Object)" class="md-nav__link">
    DataManager.Remove(data Object)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#datamanagerupdatedata-object" title="DataManager.Update(data Object)" class="md-nav__link">
    DataManager.Update(data Object)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#datamanagerupdatebyiddata-object" title="DataManager.UpdateById(data Object)" class="md-nav__link">
    DataManager.UpdateById(data Object)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#datamanagerfinddata-object" title="DataManager.Find(data Object)" class="md-nav__link">
    DataManager.Find(data Object)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#datamanagercountdata-object" title="DataManager.Count(data Object)" class="md-nav__link">
    DataManager.Count(data Object)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#datamanagerrunscriptdata-object" title="DataManager.RunScript(data Object)" class="md-nav__link">
    DataManager.RunScript(data Object)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#trigger-examples" title="Trigger examples" class="md-nav__link">
    Trigger examples
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setting-a-field-value-as-mandatory" title="Setting a field value as mandatory." class="md-nav__link">
    Setting a field value as mandatory.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-a-default-value" title="Setting a default value." class="md-nav__link">
    Setting a default value.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-a-document-related-in-a-different-collection" title="Creating a document related in a different collection." class="md-nav__link">
    Creating a document related in a different collection.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deleting-related-documents-from-a-different-collection" title="Deleting related documents from a different collection." class="md-nav__link">
    Deleting related documents from a different collection.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-a-server-side-script-from-a-trigger" title="Running a server-side script from a trigger." class="md-nav__link">
    Running a server-side script from a trigger.
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
               
              
                
                  <h1>Triggers</h1>
                
                <p>On the Triggers tab, you can create descriptions for standard triggers.</p>
<p><img alt="Triggers" src="../../img/datatriggers.png" /></p>
<p>Triggers are Java scripts that are executed when specific operations are performed with respect to data. All triggers are closed and have a local context. Select a trigger from the presented descriptions below and enter its description in the corresponding window. To save the entered description, click Save. To activate the created trigger, enable the Activate parameter. The trigger will not function without this parameter enabled.</p>
<p>When executing a trigger, the following objects are created in its context: <code>DataManager</code> and <code>pool</code>.</p>
<div class="admonition warning">
<p class="admonition-title">Trigger execution time</p>
<p>Maximum execution time for each trigger is 500 milliseconds.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Stack limit</p>
<p>Maximum depth of triggers calling stack is 10.
Example:
If you execute the "insert" operation for the same collection after the "insert" operation in the trigger, 10 documents will be inserted. After this, the call chain will be suspended.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Operations interruption/execution due to a trigger</p>
<p>When running triggers <strong>before</strong> operations "insert", "update" and "delete", you need to execute <code>return true</code> to continue the document operations, and <code>return false</code> to interrupt them. The default result for a trigger is <code>false</code> if it doesn't return the value. </p>
</div>
<div class="admonition tip">
<p class="admonition-title">Returning data when trigger operations are interrupted</p>
<p>In case there is a need to return data when a trigger operation was interrupted, you can specify data that needs to be returned in <code>pool.result</code>parameter.
For example, inside a trigger you can create a field validation for a mandatory value before adding a document.</p>
<p><pre class="codehilite"><code class="language-js">if (!pool.doc.hasOwnProperty('name')) {  // check if pool.doc does not have property &quot;name&quot;
    pool.result = &quot;You Shall Not Pass&quot;;  
    return false;                        // interrupt document creation
}; 
return true;    // else - create the document</code></pre>
Now when we try to create a document with an empty field value for <code>name</code>, the operation will be interrupted and the following data will be returned: </p>
<pre class="codehilite"><code class="language-js">{
    &quot;errCode&quot;: 412,
    &quot;errMsg&quot;: &quot;beforeInsert Trigger result: false&quot;,
    &quot;error&quot;: true,
    &quot;result&quot;: &quot;You Shall Not Pass&quot;
}</code></pre>

</div>
<h2 id="pool-object">pool Object</h2>
<p>Object <code>pool</code> contains the following data:</p>
<h3 id="before-operation-insert">Before operation <code>insert</code>:</h3>
<pre class="codehilite"><code>{
    coll : &quot;&quot;, // collection name
    doc : {}   // document with field_name:value pairs
}</code></pre>

<h3 id="after-operation-insert">After operation <code>insert</code>:</h3>
<pre class="codehilite"><code>{
    coll : &quot;&quot;,   // collection name
    newDoc : {}  // newly created document with field_name:value pairs
}</code></pre>

<h3 id="before-operation-remove">Before operation <code>remove</code>:</h3>
<pre class="codehilite"><code>{
    coll : &quot;&quot;,  // collection name
    query : {}  // search query on the basis of which documents should be removed
}</code></pre>

<h3 id="after-operation-remove">After operation <code>remove</code>:</h3>
<pre class="codehilite"><code>{
    coll : &quot;&quot;,  // collection name
    count : int, // number of removed documents
    docs  : []  // array of deleted document IDs</code></pre>

<h3 id="before-operation-update">Before operation <code>update</code>:</h3>
<pre class="codehilite"><code>{
    coll : &quot;&quot;,  // collection name
    doc   : {}, // document with value update rules
    query : {}  // search query on the basis of which documents should be updated
}</code></pre>

<h3 id="after-operation-update">After operation <code>update</code>:</h3>
<pre class="codehilite"><code>{
    coll : &quot;&quot;, // collection name
    count : int, // number of updated documents
    docs  : []  // array of updated document IDs
}</code></pre>

<h3 id="before-operation-updatebyid">Before operation <code>updatebyid</code>:</h3>
<pre class="codehilite"><code>{
    coll        : &quot;&quot;, // collection name
    doc         : {}, // document with value update rules
    query       : {}, // search query {&quot;_id&quot; : }
}</code></pre>

<h3 id="after-operation-updatebyid">After operation <code>updatebyid</code>:</h3>
<pre class="codehilite"><code>{
    coll        : &quot;&quot;, // collection name
    newDoc      : { } // updated document
}</code></pre>

<h2 id="datamanager-object">DataManager Object</h2>
<p>The <code>DataManager</code> object contains the following data handling methods:</p>
<h3 id="datamanagerinsertdata-object">DataManager.Insert(data Object)</h3>
<p>Method for inserting a document into a collection. Parameters:</p>
<p><code>data Object</code> - object containing the following attributes:</p>
<pre class="codehilite"><code>{
    coll : &quot;&quot;, // collection name, mandatory
    doc  : {}  // document with field_name:value pairs, optional
}</code></pre>

<p>Returned value – <code>Object</code>:</p>
<p><em>Success</em></p>
<pre class="codehilite"><code>{
    error  : false,
    result : {}     // created document
}</code></pre>

<p><em>Error</em></p>
<pre class="codehilite"><code>{
    error   : true,
    errCode : 4XX/5XX, // Error code
    errMsg  : &quot;Error text&quot;
}</code></pre>

<h3 id="datamanagerremovedata-object">DataManager.Remove(data Object)</h3>
<p>Method for removing documents from collection. Parameters:</p>
<p><code>data Object</code> - object containing the following attributes:</p>
<pre class="codehilite"><code>{
    coll  : &quot;&quot;, // collection name, mandatory
    query : {}, // query with field_name/operator:value pairs, optional
    limit : int // limit for the number of documents to be removed, optional,
                // if not specified, the first 1,000 documents will be removed
}</code></pre>

<p>Returned value – <code>Object</code>:</p>
<p><em>Success</em></p>
<pre class="codehilite"><code>{
    error  : false,
    result : {
        count : int, // number of removed documents
        docs  : []  // array of removed document IDs
    }
}</code></pre>

<p><em>Error</em></p>
<pre class="codehilite"><code>{
    error   : true,
    errCode : 4XX/5XX, // Error code
    errMsg  : &quot;Error text&quot;
}</code></pre>

<h3 id="datamanagerupdatedata-object">DataManager.Update(data Object)</h3>
<p>Method for updating documents in a collection. Parameters:</p>
<p><code>data Object</code> - object containing the following attributes:</p>
<pre class="codehilite"><code>{
    coll  : &quot;&quot;, // collection name, mandatory
    query : {}, // query with field_name/operator:value pairs, optional
    doc   : {}, // document with field_name:value pairs, mandatory
    limit : int // limit for the number of documents to be updated, optional,
                // if not specified, the first 1,000 documents will be updated
}</code></pre>

<p>Returned value – <code>Object</code>:</p>
<p><em>Success</em></p>
<pre class="codehilite"><code>{
    error  : false,
    result : {
        count : int, // number of removed documents
        docs  : []  // array of updated document IDs
    }
}</code></pre>

<p><em>Error</em></p>
<pre class="codehilite"><code>{
    error   : true,
    errCode : 4XX/5XX, // Error code
    errMsg  : &quot;Error text&quot;
}</code></pre>

<h3 id="datamanagerupdatebyiddata-object">DataManager.UpdateById(data Object)</h3>
<p>Method for updating one document in a collection which is identified by its ID. Parameters:</p>
<p><code>data Object</code> - object containing the following attributes:</p>
<pre class="codehilite"><code>{
    coll  : &quot;&quot;, // collection name, mandatory
    query : {}, // query in the following format: &quot;_id&quot; : &quot;document identifier&quot;, mandatory
    doc   : {}  // document with field_name:value pairs, mandatory
}</code></pre>

<p>Returned value - <code>Object</code>:</p>
<p><em>Success</em></p>
<pre class="codehilite"><code>{
    error  : false,
    result : {} // updated document
}</code></pre>

<p><em>Error</em></p>
<pre class="codehilite"><code>{
    error   : true,
    errCode : 4XX/5XX, // Error code
    errMsg  : &quot;Error text&quot;
}</code></pre>

<h3 id="datamanagerfinddata-object">DataManager.Find(data Object)</h3>
<p>Method for requesting a document from a collection. Parameters:</p>
<p><code>data Object</code> - object containing the following attributes:</p>
<pre class="codehilite"><code>{
    coll   : &quot;&quot;, // collection name, mandatory
    query  : {}, // query with field_name/operator:value pairs, optional if empty
                 // then first 100 documents will be returned
    sort   : {}, // sorting by fields in format field_name:1/-1, optional
    fields : [], // list of field names that will be returned in each document, optional
    limit  : int,// limit of the sample size, by default, 50
    skip   : int // number of documents to be skipped in the sample
}
</code></pre>

<p>Returned value – <code>Object</code>:</p>
<p><em>Success</em></p>
<pre class="codehilite"><code>{
    error  : false,
    result : [] // array of selected documents taking into account the limit
}</code></pre>

<p><em>Error</em></p>
<pre class="codehilite"><code>{
    error   : true,
    errCode : 4XX/5XX, // Error code
    errMsg  : &quot;Error text&quot;
}</code></pre>

<h3 id="datamanagercountdata-object">DataManager.Count(data Object)</h3>
<p>Method for requesting the number of documents in a collection Parameters:</p>
<p><code>data Object</code> - object containing the following attributes:</p>
<pre class="codehilite"><code>{
    coll  : &quot;&quot;, // collection name, mandatory
    query : {}  // query with field_name/operator:value pairs, optional
}</code></pre>

<p>Returned value – <code>Object</code>:</p>
<p><em>Success</em></p>
<pre class="codehilite"><code>{
    error  : false,
    result : int // number of documents
}</code></pre>

<p><em>Error</em></p>
<pre class="codehilite"><code>{
    error   : true,
    errCode : 4XX/5XX, // Error code
    errMsg  : &quot;Error text&quot;
}</code></pre>

<h3 id="datamanagerrunscriptdata-object">DataManager.RunScript(data Object)</h3>
<p>A method that runs a server-side script. Parameters:</p>
<p><code>data Object</code> - object containing the following attributes:</p>
<pre class="codehilite"><code>{
    script   : &quot;&quot;, // script identifier, mandatory
    pool     : {}  // object with the data that will be passed to the server-side script, optional
}</code></pre>

<p>Returned value – <code>Object</code>:</p>
<p><em>Success</em></p>
<pre class="codehilite"><code>{
    error  : false
}</code></pre>

<p><em>Error</em></p>
<pre class="codehilite"><code>{
    error   : true,
    errCode : 4XX/5XX, // Error code
    errMsg  : &quot;Error text&quot;
}</code></pre>

<h2 id="trigger-examples">Trigger examples</h2>
<h3 id="setting-a-field-value-as-mandatory">Setting a field value as mandatory.</h3>
<p>Before adding a document you can check whether a value is specified in the "name" field. In case it is not, you can interrupt the operation of adding the document.</p>
<pre class="codehilite"><code class="language-js">if (!pool.doc.hasOwnProperty('name')) {   
        return false;                     // if name is not specified then document creation will be interrupted
    } else {
        return true;                      
    };</code></pre>

<h3 id="setting-a-default-value">Setting a default value.</h3>
<p>Before adding a document you can check whether a value is specified in the "name" field. In case it is not, you can set the value as a default one.</p>
<pre class="codehilite"><code class="language-js">if (!pool.doc.hasOwnProperty('name')) { 
        pool.doc.name = &quot;John Snow&quot;;    // if not specified, name is now &quot;John Snow&quot; dy default 
    }

return true;                    </code></pre>

<h3 id="creating-a-document-related-in-a-different-collection">Creating a document related in a different collection.</h3>
<p>After adding a document, you can create another document in a different collection with a link to the added one.</p>
<pre class="codehilite"><code class="language-js">DataManager.Insert({                           // create new document in the &quot;stuff&quot; collection
        coll : &quot;stuff&quot;,
        doc  : {
                   &quot;thing&quot;: pool.newDoc._id    // pass _id value to the new document's field &quot;thing&quot;
        }
    })</code></pre>

<h3 id="deleting-related-documents-from-a-different-collection">Deleting related documents from a different collection.</h3>
<p>Before deleting a document, you can delete all documents from a different collection with a link to the document you want to delete.</p>
<pre class="codehilite"><code class="language-js">DataManager.Remove({                           //  delete all related documents in the &quot;stuff&quot; collection
    coll  : &quot;stuff&quot;,
    query: {
        &quot;thing&quot;: pool.query._id                // pass _id to the document which is about to be deleted
    }
})
return true;</code></pre>

<h3 id="running-a-server-side-script-from-a-trigger">Running a server-side script from a trigger.</h3>
<p>After a document is created, a script can be executed with the new document data. As an example, the script can send PUSH-notifications.</p>
<pre class="codehilite"><code class="language-js">DataManager.RunScript({                   // run a script with the ID 580b386d42d52f1ba275fc24
    script  : &quot;580b386d42d52f1ba275fc24&quot;,
    pool: {
        &quot;doc&quot;: pool.newDoc                // pass a new document to the script 
    }
})</code></pre>
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../app3/" title="Indexes" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Indexes
              </span>
            </div>
          </a>
        
        
          <a href="../app5/" title="Serverside code" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Serverside code
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
      <a href="https://github.com/scorocode" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://www.facebook.com/scorocode" class="md-footer-social__link fa fa-facebook"></a>
    
      <a href="https://www.linkedin.com/company/prof-it-group" class="md-footer-social__link fa fa-linkedin"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application-2afe21e0b2.js"></script>
      <script>var config={url:{base:"../.."}},app=new Application(config);app.initialize()</script>
      
    
    
      
    
  </body>
</html>